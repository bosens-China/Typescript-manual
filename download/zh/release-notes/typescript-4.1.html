<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>TypeScript 4.1 | TypeScript手册</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/Typescript-manual/favicon.png">
    <meta name="description" content="TypeScript是JavaScript类型的超集，它可以编译成纯JavaScript。
  TypeScript可以在任何浏览器、任何计算机和任何操作系统上运行，并且是开源的。">
    <meta name="viewport" content="width=device-width, initial-scale=1.0,user-scalable=no, viewport-fit=cover">
    <meta name="keywords" content="typescript,docs,手册,文档">
    <meta name="author" content="boses">
    <meta name="google" content="notranslate">
    
    <link rel="preload" href="/Typescript-manual/assets/css/0.styles.237d6e09.css" as="style"><link rel="preload" href="/Typescript-manual/assets/js/app.1593970b.js" as="script"><link rel="preload" href="/Typescript-manual/assets/js/2.f0d70486.js" as="script"><link rel="preload" href="/Typescript-manual/assets/js/1.93812fe5.js" as="script"><link rel="preload" href="/Typescript-manual/assets/js/151.a761bf9b.js" as="script"><link rel="prefetch" href="/Typescript-manual/assets/js/10.4762e221.js"><link rel="prefetch" href="/Typescript-manual/assets/js/100.d9e46ceb.js"><link rel="prefetch" href="/Typescript-manual/assets/js/101.b135bd55.js"><link rel="prefetch" href="/Typescript-manual/assets/js/102.eb03502d.js"><link rel="prefetch" href="/Typescript-manual/assets/js/103.6d45baa7.js"><link rel="prefetch" href="/Typescript-manual/assets/js/104.9282c1ea.js"><link rel="prefetch" href="/Typescript-manual/assets/js/105.7c026097.js"><link rel="prefetch" href="/Typescript-manual/assets/js/106.1a54e046.js"><link rel="prefetch" href="/Typescript-manual/assets/js/107.c7455d6c.js"><link rel="prefetch" href="/Typescript-manual/assets/js/108.9910413b.js"><link rel="prefetch" href="/Typescript-manual/assets/js/109.7326eb25.js"><link rel="prefetch" href="/Typescript-manual/assets/js/11.87c69216.js"><link rel="prefetch" href="/Typescript-manual/assets/js/110.cc92b634.js"><link rel="prefetch" href="/Typescript-manual/assets/js/111.040b77ba.js"><link rel="prefetch" href="/Typescript-manual/assets/js/112.e6fe143c.js"><link rel="prefetch" href="/Typescript-manual/assets/js/113.ae192573.js"><link rel="prefetch" href="/Typescript-manual/assets/js/114.fb65c1e1.js"><link rel="prefetch" href="/Typescript-manual/assets/js/115.c01cfbd6.js"><link rel="prefetch" href="/Typescript-manual/assets/js/116.02c6ca5f.js"><link rel="prefetch" href="/Typescript-manual/assets/js/117.66129e9d.js"><link rel="prefetch" href="/Typescript-manual/assets/js/118.6a1c9db2.js"><link rel="prefetch" href="/Typescript-manual/assets/js/119.e744a988.js"><link rel="prefetch" href="/Typescript-manual/assets/js/12.4babe899.js"><link rel="prefetch" href="/Typescript-manual/assets/js/120.795aa6be.js"><link rel="prefetch" href="/Typescript-manual/assets/js/121.577dd2ed.js"><link rel="prefetch" href="/Typescript-manual/assets/js/122.287b1f13.js"><link rel="prefetch" href="/Typescript-manual/assets/js/123.8043a050.js"><link rel="prefetch" href="/Typescript-manual/assets/js/124.7c6f56cf.js"><link rel="prefetch" href="/Typescript-manual/assets/js/125.c8a9a013.js"><link rel="prefetch" href="/Typescript-manual/assets/js/126.e64eccdd.js"><link rel="prefetch" href="/Typescript-manual/assets/js/127.3029a53e.js"><link rel="prefetch" href="/Typescript-manual/assets/js/128.654e2397.js"><link rel="prefetch" href="/Typescript-manual/assets/js/129.cb4fc6c0.js"><link rel="prefetch" href="/Typescript-manual/assets/js/13.5ab5050a.js"><link rel="prefetch" href="/Typescript-manual/assets/js/130.c6b9a006.js"><link rel="prefetch" href="/Typescript-manual/assets/js/131.1cebdbee.js"><link rel="prefetch" href="/Typescript-manual/assets/js/132.2620ecb5.js"><link rel="prefetch" href="/Typescript-manual/assets/js/133.7f53bf1f.js"><link rel="prefetch" href="/Typescript-manual/assets/js/134.129702c6.js"><link rel="prefetch" href="/Typescript-manual/assets/js/135.8f4d5357.js"><link rel="prefetch" href="/Typescript-manual/assets/js/136.e17df536.js"><link rel="prefetch" href="/Typescript-manual/assets/js/137.ff13fde2.js"><link rel="prefetch" href="/Typescript-manual/assets/js/138.fb3636c3.js"><link rel="prefetch" href="/Typescript-manual/assets/js/139.f8beedc3.js"><link rel="prefetch" href="/Typescript-manual/assets/js/14.7a250a11.js"><link rel="prefetch" href="/Typescript-manual/assets/js/140.3daa1308.js"><link rel="prefetch" href="/Typescript-manual/assets/js/141.bb090054.js"><link rel="prefetch" href="/Typescript-manual/assets/js/142.fed938ad.js"><link rel="prefetch" href="/Typescript-manual/assets/js/143.a3b29462.js"><link rel="prefetch" href="/Typescript-manual/assets/js/144.c09dd4b2.js"><link rel="prefetch" href="/Typescript-manual/assets/js/145.ffc8125a.js"><link rel="prefetch" href="/Typescript-manual/assets/js/146.743057fc.js"><link rel="prefetch" href="/Typescript-manual/assets/js/147.ac8ef52d.js"><link rel="prefetch" href="/Typescript-manual/assets/js/148.6d5e8ae5.js"><link rel="prefetch" href="/Typescript-manual/assets/js/149.341c6a4f.js"><link rel="prefetch" href="/Typescript-manual/assets/js/15.fd694870.js"><link rel="prefetch" href="/Typescript-manual/assets/js/150.31a051f2.js"><link rel="prefetch" href="/Typescript-manual/assets/js/152.32ee780e.js"><link rel="prefetch" href="/Typescript-manual/assets/js/153.1e2f2b44.js"><link rel="prefetch" href="/Typescript-manual/assets/js/154.bc25bc22.js"><link rel="prefetch" href="/Typescript-manual/assets/js/155.fb17da55.js"><link rel="prefetch" href="/Typescript-manual/assets/js/156.651a9c2e.js"><link rel="prefetch" href="/Typescript-manual/assets/js/157.adca0669.js"><link rel="prefetch" href="/Typescript-manual/assets/js/158.a3abc67d.js"><link rel="prefetch" href="/Typescript-manual/assets/js/159.c2445408.js"><link rel="prefetch" href="/Typescript-manual/assets/js/16.a882cd43.js"><link rel="prefetch" href="/Typescript-manual/assets/js/160.c6a27367.js"><link rel="prefetch" href="/Typescript-manual/assets/js/161.b312e41a.js"><link rel="prefetch" href="/Typescript-manual/assets/js/162.3287bbbd.js"><link rel="prefetch" href="/Typescript-manual/assets/js/163.47be0007.js"><link rel="prefetch" href="/Typescript-manual/assets/js/164.210d1a22.js"><link rel="prefetch" href="/Typescript-manual/assets/js/165.7482c1f3.js"><link rel="prefetch" href="/Typescript-manual/assets/js/166.45c6e113.js"><link rel="prefetch" href="/Typescript-manual/assets/js/167.2eebcd57.js"><link rel="prefetch" href="/Typescript-manual/assets/js/168.b3d23364.js"><link rel="prefetch" href="/Typescript-manual/assets/js/169.c924ff86.js"><link rel="prefetch" href="/Typescript-manual/assets/js/17.76d6950f.js"><link rel="prefetch" href="/Typescript-manual/assets/js/170.03ef2fa9.js"><link rel="prefetch" href="/Typescript-manual/assets/js/171.34187668.js"><link rel="prefetch" href="/Typescript-manual/assets/js/172.635bb738.js"><link rel="prefetch" href="/Typescript-manual/assets/js/173.6bbe41b6.js"><link rel="prefetch" href="/Typescript-manual/assets/js/174.e442febc.js"><link rel="prefetch" href="/Typescript-manual/assets/js/175.41bb67ab.js"><link rel="prefetch" href="/Typescript-manual/assets/js/176.49120c59.js"><link rel="prefetch" href="/Typescript-manual/assets/js/177.c523f572.js"><link rel="prefetch" href="/Typescript-manual/assets/js/178.9423ebb2.js"><link rel="prefetch" href="/Typescript-manual/assets/js/179.dda7f960.js"><link rel="prefetch" href="/Typescript-manual/assets/js/18.cac3cb70.js"><link rel="prefetch" href="/Typescript-manual/assets/js/180.4dfba409.js"><link rel="prefetch" href="/Typescript-manual/assets/js/181.e4f017a7.js"><link rel="prefetch" href="/Typescript-manual/assets/js/182.547e085d.js"><link rel="prefetch" href="/Typescript-manual/assets/js/183.5acbdd59.js"><link rel="prefetch" href="/Typescript-manual/assets/js/19.04e9bc02.js"><link rel="prefetch" href="/Typescript-manual/assets/js/20.68aa1956.js"><link rel="prefetch" href="/Typescript-manual/assets/js/21.d9e46a4f.js"><link rel="prefetch" href="/Typescript-manual/assets/js/22.f23e5600.js"><link rel="prefetch" href="/Typescript-manual/assets/js/23.1a6c395d.js"><link rel="prefetch" href="/Typescript-manual/assets/js/24.c4122643.js"><link rel="prefetch" href="/Typescript-manual/assets/js/25.25881907.js"><link rel="prefetch" href="/Typescript-manual/assets/js/26.b5d956b1.js"><link rel="prefetch" href="/Typescript-manual/assets/js/27.ee846739.js"><link rel="prefetch" href="/Typescript-manual/assets/js/28.ba1574f7.js"><link rel="prefetch" href="/Typescript-manual/assets/js/29.32e60931.js"><link rel="prefetch" href="/Typescript-manual/assets/js/3.c0ad6938.js"><link rel="prefetch" href="/Typescript-manual/assets/js/30.3b6cd0b7.js"><link rel="prefetch" href="/Typescript-manual/assets/js/31.0a11a38c.js"><link rel="prefetch" href="/Typescript-manual/assets/js/32.f159c8e6.js"><link rel="prefetch" href="/Typescript-manual/assets/js/33.1ef243d1.js"><link rel="prefetch" href="/Typescript-manual/assets/js/34.f01c876d.js"><link rel="prefetch" href="/Typescript-manual/assets/js/35.8bfdb28b.js"><link rel="prefetch" href="/Typescript-manual/assets/js/36.fdd0ba51.js"><link rel="prefetch" href="/Typescript-manual/assets/js/37.3f218ce6.js"><link rel="prefetch" href="/Typescript-manual/assets/js/38.f8226620.js"><link rel="prefetch" href="/Typescript-manual/assets/js/39.e7d5d326.js"><link rel="prefetch" href="/Typescript-manual/assets/js/4.038d7f28.js"><link rel="prefetch" href="/Typescript-manual/assets/js/40.7a4cb0fe.js"><link rel="prefetch" href="/Typescript-manual/assets/js/41.494af996.js"><link rel="prefetch" href="/Typescript-manual/assets/js/42.304eae27.js"><link rel="prefetch" href="/Typescript-manual/assets/js/43.769a064a.js"><link rel="prefetch" href="/Typescript-manual/assets/js/44.9b36658c.js"><link rel="prefetch" href="/Typescript-manual/assets/js/45.1038e1df.js"><link rel="prefetch" href="/Typescript-manual/assets/js/46.65baf8d4.js"><link rel="prefetch" href="/Typescript-manual/assets/js/47.7b66616f.js"><link rel="prefetch" href="/Typescript-manual/assets/js/48.0e91f3a4.js"><link rel="prefetch" href="/Typescript-manual/assets/js/49.b7f1bb44.js"><link rel="prefetch" href="/Typescript-manual/assets/js/5.64774910.js"><link rel="prefetch" href="/Typescript-manual/assets/js/50.045dee0d.js"><link rel="prefetch" href="/Typescript-manual/assets/js/51.f4d25851.js"><link rel="prefetch" href="/Typescript-manual/assets/js/52.488e3de2.js"><link rel="prefetch" href="/Typescript-manual/assets/js/53.24bf50d9.js"><link rel="prefetch" href="/Typescript-manual/assets/js/54.2342813a.js"><link rel="prefetch" href="/Typescript-manual/assets/js/55.ba7136ba.js"><link rel="prefetch" href="/Typescript-manual/assets/js/56.34586136.js"><link rel="prefetch" href="/Typescript-manual/assets/js/57.55444e9b.js"><link rel="prefetch" href="/Typescript-manual/assets/js/58.6e7dd2c6.js"><link rel="prefetch" href="/Typescript-manual/assets/js/59.6907c3e4.js"><link rel="prefetch" href="/Typescript-manual/assets/js/6.cfb80da4.js"><link rel="prefetch" href="/Typescript-manual/assets/js/60.f7c33e9f.js"><link rel="prefetch" href="/Typescript-manual/assets/js/61.d887d15b.js"><link rel="prefetch" href="/Typescript-manual/assets/js/62.eeb4a1af.js"><link rel="prefetch" href="/Typescript-manual/assets/js/63.166ceb13.js"><link rel="prefetch" href="/Typescript-manual/assets/js/64.e5f91c57.js"><link rel="prefetch" href="/Typescript-manual/assets/js/65.f37d6448.js"><link rel="prefetch" href="/Typescript-manual/assets/js/66.67a6098b.js"><link rel="prefetch" href="/Typescript-manual/assets/js/67.98342e87.js"><link rel="prefetch" href="/Typescript-manual/assets/js/68.0eca9faa.js"><link rel="prefetch" href="/Typescript-manual/assets/js/69.accb09f1.js"><link rel="prefetch" href="/Typescript-manual/assets/js/7.3c60c652.js"><link rel="prefetch" href="/Typescript-manual/assets/js/70.df1bb896.js"><link rel="prefetch" href="/Typescript-manual/assets/js/71.65b4584b.js"><link rel="prefetch" href="/Typescript-manual/assets/js/72.5ad16533.js"><link rel="prefetch" href="/Typescript-manual/assets/js/73.222e0f4f.js"><link rel="prefetch" href="/Typescript-manual/assets/js/74.6d364488.js"><link rel="prefetch" href="/Typescript-manual/assets/js/75.f08ef413.js"><link rel="prefetch" href="/Typescript-manual/assets/js/76.06f71fc6.js"><link rel="prefetch" href="/Typescript-manual/assets/js/77.51c40296.js"><link rel="prefetch" href="/Typescript-manual/assets/js/78.e858e4ab.js"><link rel="prefetch" href="/Typescript-manual/assets/js/79.44e29644.js"><link rel="prefetch" href="/Typescript-manual/assets/js/80.b67dcf99.js"><link rel="prefetch" href="/Typescript-manual/assets/js/81.b7cea060.js"><link rel="prefetch" href="/Typescript-manual/assets/js/82.6441a0a3.js"><link rel="prefetch" href="/Typescript-manual/assets/js/83.03f2f860.js"><link rel="prefetch" href="/Typescript-manual/assets/js/84.070382e8.js"><link rel="prefetch" href="/Typescript-manual/assets/js/85.7a10baf5.js"><link rel="prefetch" href="/Typescript-manual/assets/js/86.52448263.js"><link rel="prefetch" href="/Typescript-manual/assets/js/87.3e28b70e.js"><link rel="prefetch" href="/Typescript-manual/assets/js/88.ac603069.js"><link rel="prefetch" href="/Typescript-manual/assets/js/89.d8fc6c9d.js"><link rel="prefetch" href="/Typescript-manual/assets/js/90.061b7bae.js"><link rel="prefetch" href="/Typescript-manual/assets/js/91.085c8066.js"><link rel="prefetch" href="/Typescript-manual/assets/js/92.f91f3791.js"><link rel="prefetch" href="/Typescript-manual/assets/js/93.222df328.js"><link rel="prefetch" href="/Typescript-manual/assets/js/94.a419988b.js"><link rel="prefetch" href="/Typescript-manual/assets/js/95.ab410dec.js"><link rel="prefetch" href="/Typescript-manual/assets/js/96.d094c11b.js"><link rel="prefetch" href="/Typescript-manual/assets/js/97.a32b936b.js"><link rel="prefetch" href="/Typescript-manual/assets/js/98.86d54546.js"><link rel="prefetch" href="/Typescript-manual/assets/js/99.fe0b2436.js"><link rel="prefetch" href="/Typescript-manual/assets/js/vendors~docsearch.8e5b54b3.js">
    <link rel="stylesheet" href="/Typescript-manual/assets/css/0.styles.237d6e09.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/Typescript-manual/" class="home-link router-link-active"><!----> <span class="site-name">TypeScript手册</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/Typescript-manual/describe/" class="nav-link">
  进入目录
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="友情链接菜单" class="dropdown-title"><span class="title">友情链接</span> <span class="arrow down"></span></button> <button type="button" aria-label="友情链接菜单" class="mobile-dropdown-title"><span class="title">友情链接</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://jkchao.github.io/typescript-book-chinese/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  深入理解 TypeScript
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://ts.xcatliu.com/introduction/hello-typescript" target="_blank" rel="noopener noreferrer" class="nav-link external">
  hello-typescript
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://www.typescriptlang.org/docs/home.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  TypeScript手册（英文版）
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/Microsoft/TypeScript/blob/master/doc/spec.md" target="_blank" rel="noopener noreferrer" class="nav-link external">
  TypeScript语言规范
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/zhongsp/TypeScript/blob/master/CONTRIBUTING.md" target="_blank" rel="noopener noreferrer" class="nav-link external">
  参与贡献
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="https://github.com/bosens-China/Typescript-manual" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/bosens-China/Typescript-manual/issues" target="_blank" rel="noopener noreferrer" class="nav-link external">
  问题反馈
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/Typescript-manual/describe/" class="nav-link">
  进入目录
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="友情链接菜单" class="dropdown-title"><span class="title">友情链接</span> <span class="arrow down"></span></button> <button type="button" aria-label="友情链接菜单" class="mobile-dropdown-title"><span class="title">友情链接</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://jkchao.github.io/typescript-book-chinese/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  深入理解 TypeScript
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://ts.xcatliu.com/introduction/hello-typescript" target="_blank" rel="noopener noreferrer" class="nav-link external">
  hello-typescript
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://www.typescriptlang.org/docs/home.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  TypeScript手册（英文版）
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/Microsoft/TypeScript/blob/master/doc/spec.md" target="_blank" rel="noopener noreferrer" class="nav-link external">
  TypeScript语言规范
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/zhongsp/TypeScript/blob/master/CONTRIBUTING.md" target="_blank" rel="noopener noreferrer" class="nav-link external">
  参与贡献
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="https://github.com/bosens-China/Typescript-manual" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/bosens-China/Typescript-manual/issues" target="_blank" rel="noopener noreferrer" class="nav-link external">
  问题反馈
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/Typescript-manual/describe/" class="sidebar-link">前言</a></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>快速上手</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Typescript-manual/download/zh/tutorials/typescript-in-5-minutes.html" class="sidebar-link">5 分钟了解 TypeScript</a></li><li><a href="/Typescript-manual/download/zh/tutorials/asp.net-core.html" class="sidebar-link">ASP.NET Core</a></li><li><a href="/Typescript-manual/download/zh/tutorials/asp.net-4.html" class="sidebar-link">ASP.NET 4</a></li><li><a href="/Typescript-manual/download/zh/tutorials/gulp.html" class="sidebar-link">Gulp</a></li><li><a href="/Typescript-manual/download/zh/tutorials/knockout.html" class="sidebar-link">Knockout.js</a></li><li><a href="/Typescript-manual/download/zh/tutorials/react-and-webpack.html" class="sidebar-link">React 与 webpack</a></li><li><a href="/Typescript-manual/download/zh/tutorials/react.html" class="sidebar-link">React</a></li><li><a href="/Typescript-manual/download/zh/tutorials/angular-2.html" class="sidebar-link">Angular 2</a></li><li><a href="/Typescript-manual/download/zh/tutorials/migrating-from-javascript.html" class="sidebar-link">从 JavaScript 迁移到 TypeScript</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>手册</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Typescript-manual/download/zh/handbook/basic-types.html" class="sidebar-link">基础类型</a></li><li><a href="/Typescript-manual/download/zh/handbook/interfaces.html" class="sidebar-link">接口</a></li><li><a href="/Typescript-manual/download/zh/handbook/functions.html" class="sidebar-link">函数</a></li><li><a href="/Typescript-manual/download/zh/handbook/literal-types.html" class="sidebar-link">字面量类型</a></li><li><a href="/Typescript-manual/download/zh/handbook/unions-and-intersections.html" class="sidebar-link">联合类型和交叉类型</a></li><li><a href="/Typescript-manual/download/zh/handbook/classes.html" class="sidebar-link">类</a></li><li><a href="/Typescript-manual/download/zh/handbook/enums.html" class="sidebar-link">枚举</a></li><li><a href="/Typescript-manual/download/zh/handbook/generics.html" class="sidebar-link">泛型</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>手册（进阶）</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Typescript-manual/download/zh/reference/advanced-types.html" class="sidebar-link">高级类型</a></li><li><a href="/Typescript-manual/download/zh/reference/utility-types.html" class="sidebar-link">实用工具类型</a></li><li><a href="/Typescript-manual/download/zh/reference/decorators.html" class="sidebar-link">Decorators</a></li><li><a href="/Typescript-manual/download/zh/reference/declaration-merging.html" class="sidebar-link">声明合并</a></li><li><a href="/Typescript-manual/download/zh/reference/iterators-and-generators.html" class="sidebar-link">Iterators 和 Generators</a></li><li><a href="/Typescript-manual/download/zh/reference/jsx.html" class="sidebar-link">JSX</a></li><li><a href="/Typescript-manual/download/zh/reference/mixins.html" class="sidebar-link">混入</a></li><li><a href="/Typescript-manual/download/zh/reference/modules.html" class="sidebar-link">模块</a></li><li><a href="/Typescript-manual/download/zh/reference/module-resolution.html" class="sidebar-link">模块解析</a></li><li><a href="/Typescript-manual/download/zh/reference/namespaces.html" class="sidebar-link">命名空间</a></li><li><a href="/Typescript-manual/download/zh/reference/namespaces-and-modules.html" class="sidebar-link">命名空间和模块</a></li><li><a href="/Typescript-manual/download/zh/reference/symbols.html" class="sidebar-link">Symbols</a></li><li><a href="/Typescript-manual/download/zh/reference/triple-slash-directives.html" class="sidebar-link">三斜线指令</a></li><li><a href="/Typescript-manual/download/zh/reference/type-compatibility.html" class="sidebar-link">类型兼容性</a></li><li><a href="/Typescript-manual/download/zh/reference/type-inference.html" class="sidebar-link">类型推论</a></li><li><a href="/Typescript-manual/download/zh/reference/variable-declarations.html" class="sidebar-link">变量声明</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>手册（v2）
</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Typescript-manual/download/zh/handbook-v2/type-manipulation/template-literal-types.html" class="sidebar-link">模版字面量类型</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>如何书写声明文件</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Typescript-manual/download/zh/declaration-files/introduction.html" class="sidebar-link">介绍</a></li><li><a href="/Typescript-manual/download/zh/declaration-files/by-example.html" class="sidebar-link">举例</a></li><li><a href="/Typescript-manual/download/zh/declaration-files/library-structures.html" class="sidebar-link">库结构</a></li><li><a href="/Typescript-manual/download/zh/declaration-files/templates.html" class="sidebar-link">模板</a></li><li><a href="/Typescript-manual/download/zh/declaration-files/do-s-and-don-ts.html" class="sidebar-link">最佳实践</a></li><li><a href="/Typescript-manual/download/zh/declaration-files/deep-dive.html" class="sidebar-link">深入</a></li><li><a href="/Typescript-manual/download/zh/declaration-files/publishing.html" class="sidebar-link">发布</a></li><li><a href="/Typescript-manual/download/zh/declaration-files/consumption.html" class="sidebar-link">使用</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>JavaScript
</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Typescript-manual/download/zh/javascript/type-checking-javascript-files.html" class="sidebar-link">JavaScript 文件里的类型检查</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>工程配置</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Typescript-manual/download/zh/project-config/tsconfig.json.html" class="sidebar-link">tsconfig.json</a></li><li><a href="/Typescript-manual/download/zh/project-config/project-references.html" class="sidebar-link">工程引用</a></li><li><a href="/Typescript-manual/download/zh/project-config/typings-for-npm-packages.html" class="sidebar-link">NPM 包的类型</a></li><li><a href="/Typescript-manual/download/zh/project-config/compiler-options.html" class="sidebar-link">编译选项</a></li><li><a href="/Typescript-manual/download/zh/project-config/configuring-watch.html" class="sidebar-link">配置 Watch</a></li><li><a href="/Typescript-manual/download/zh/project-config/compiler-options-in-msbuild.html" class="sidebar-link">在 MSBuild 里使用编译选项</a></li><li><a href="/Typescript-manual/download/zh/project-config/integrating-with-build-tools.html" class="sidebar-link">与其它构建工具整合</a></li><li><a href="/Typescript-manual/download/zh/project-config/nightly-builds.html" class="sidebar-link">使用 TypeScript 的每日构建版本</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Wiki</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Typescript-manual/download/zh/wiki/this-in-typescript.html" class="sidebar-link">TypeScript 里的 this</a></li><li><a href="/Typescript-manual/download/zh/wiki/coding_guidelines.html" class="sidebar-link">编码规范</a></li><li><a href="/Typescript-manual/download/zh/wiki/common-errors.html" class="sidebar-link">常见编译错误</a></li><li><a href="/Typescript-manual/download/zh/wiki/typescript-editor-support.html" class="sidebar-link">支持 TypeScript 的编辑器</a></li><li><a href="/Typescript-manual/download/zh/wiki/using-typescript-with-asp.net-5.html" class="sidebar-link">结合 ASP.NET v5 使用 TypeScript</a></li><li><a href="/Typescript-manual/download/zh/wiki/architectural-overview.html" class="sidebar-link">架构概述</a></li><li><a href="/Typescript-manual/download/zh/wiki/roadmap.html" class="sidebar-link">发展路线图</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>新增功能</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Typescript-manual/download/zh/release-notes/typescript-5.7.html" class="sidebar-link">TypeScript 5.7</a></li><li><a href="/Typescript-manual/download/zh/release-notes/typescript-5.6.html" class="sidebar-link">TypeScript 5.6</a></li><li><a href="/Typescript-manual/download/zh/release-notes/typescript-5.5.html" class="sidebar-link">TypeScript 5.5</a></li><li><a href="/Typescript-manual/download/zh/release-notes/typescript-5.4.html" class="sidebar-link">TypeScript 5.4</a></li><li><a href="/Typescript-manual/download/zh/release-notes/typescript-5.3.html" class="sidebar-link">TypeScript 5.3</a></li><li><a href="/Typescript-manual/download/zh/release-notes/typescript-5.2.html" class="sidebar-link">TypeScript 5.2</a></li><li><a href="/Typescript-manual/download/zh/release-notes/typescript-5.1.html" class="sidebar-link">TypeScript 5.1</a></li><li><a href="/Typescript-manual/download/zh/release-notes/typescript-5.0.html" class="sidebar-link">TypeScript 5.0</a></li><li><a href="/Typescript-manual/download/zh/release-notes/typescript-4.9.html" class="sidebar-link">TypeScript 4.9</a></li><li><a href="/Typescript-manual/download/zh/release-notes/typescript-4.8.html" class="sidebar-link">TypeScript 4.8</a></li><li><a href="/Typescript-manual/download/zh/release-notes/typescript-4.7.html" class="sidebar-link">TypeScript 4.7</a></li><li><a href="/Typescript-manual/download/zh/release-notes/typescript-4.6.html" class="sidebar-link">TypeScript 4.6</a></li><li><a href="/Typescript-manual/download/zh/release-notes/typescript-4.5.html" class="sidebar-link">TypeScript 4.5</a></li><li><a href="/Typescript-manual/download/zh/release-notes/typescript-4.4.html" class="sidebar-link">TypeScript 4.4</a></li><li><a href="/Typescript-manual/download/zh/release-notes/typescript-4.3.html" class="sidebar-link">TypeScript 4.3</a></li><li><a href="/Typescript-manual/download/zh/release-notes/typescript-4.2.html" class="sidebar-link">TypeScript 4.2</a></li><li><a href="/Typescript-manual/download/zh/release-notes/typescript-4.1.html" aria-current="page" class="active sidebar-link">TypeScript 4.1</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Typescript-manual/download/zh/release-notes/typescript-4.1.html#模版字面量类型" class="sidebar-link">模版字面量类型</a></li><li class="sidebar-sub-header"><a href="/Typescript-manual/download/zh/release-notes/typescript-4.1.html#在映射类型中更改映射的键" class="sidebar-link">在映射类型中更改映射的键</a></li><li class="sidebar-sub-header"><a href="/Typescript-manual/download/zh/release-notes/typescript-4.1.html#递归的有条件类型" class="sidebar-link">递归的有条件类型</a></li><li class="sidebar-sub-header"><a href="/Typescript-manual/download/zh/release-notes/typescript-4.1.html#索引访问类型检查-nouncheckedindexedaccess" class="sidebar-link">索引访问类型检查（--noUncheckedIndexedAccess）</a></li><li class="sidebar-sub-header"><a href="/Typescript-manual/download/zh/release-notes/typescript-4.1.html#不带-baseurl-的-paths" class="sidebar-link">不带 baseUrl 的 paths</a></li><li class="sidebar-sub-header"><a href="/Typescript-manual/download/zh/release-notes/typescript-4.1.html#checkjs-默认启用-allowjs" class="sidebar-link">checkJs 默认启用 allowJs</a></li><li class="sidebar-sub-header"><a href="/Typescript-manual/download/zh/release-notes/typescript-4.1.html#react-17-jsx-工厂" class="sidebar-link">React 17 JSX 工厂</a></li><li class="sidebar-sub-header"><a href="/Typescript-manual/download/zh/release-notes/typescript-4.1.html#在编辑器中支持-jsdoc-see-标签" class="sidebar-link">在编辑器中支持 JSDoc @see 标签</a></li><li class="sidebar-sub-header"><a href="/Typescript-manual/download/zh/release-notes/typescript-4.1.html#破坏性改动" class="sidebar-link">破坏性改动</a></li></ul></li><li><a href="/Typescript-manual/download/zh/release-notes/typescript-4.0.html" class="sidebar-link">TypeScript 4.0</a></li><li><a href="/Typescript-manual/download/zh/release-notes/typescript-3.9.html" class="sidebar-link">TypeScript 3.9</a></li><li><a href="/Typescript-manual/download/zh/release-notes/typescript-3.8.html" class="sidebar-link">TypeScript 3.8</a></li><li><a href="/Typescript-manual/download/zh/release-notes/typescript-3.7.html" class="sidebar-link">TypeScript 3.7</a></li><li><a href="/Typescript-manual/download/zh/release-notes/typescript-3.6.html" class="sidebar-link">TypeScript 3.6</a></li><li><a href="/Typescript-manual/download/zh/release-notes/typescript-3.5.html" class="sidebar-link">TypeScript 3.5</a></li><li><a href="/Typescript-manual/download/zh/release-notes/typescript-3.4.html" class="sidebar-link">TypeScript 3.4</a></li><li><a href="/Typescript-manual/download/zh/release-notes/typescript-3.3.html" class="sidebar-link">TypeScript 3.3</a></li><li><a href="/Typescript-manual/download/zh/release-notes/typescript-3.2.html" class="sidebar-link">TypeScript 3.2</a></li><li><a href="/Typescript-manual/download/zh/release-notes/typescript-3.1.html" class="sidebar-link">TypeScript 3.1</a></li><li><a href="/Typescript-manual/download/zh/release-notes/typescript-3.0.html" class="sidebar-link">TypeScript 3.0</a></li><li><a href="/Typescript-manual/download/zh/release-notes/typescript-2.9.html" class="sidebar-link">TypeScript 2.9</a></li><li><a href="/Typescript-manual/download/zh/release-notes/typescript-2.8.html" class="sidebar-link">TypeScript 2.8</a></li><li><a href="/Typescript-manual/download/zh/release-notes/typescript-2.7.html" class="sidebar-link">TypeScript 2.7</a></li><li><a href="/Typescript-manual/download/zh/release-notes/typescript-2.6.html" class="sidebar-link">TypeScript 2.6</a></li><li><a href="/Typescript-manual/download/zh/release-notes/typescript-2.5.html" class="sidebar-link">TypeScript 2.5</a></li><li><a href="/Typescript-manual/download/zh/release-notes/typescript-2.4.html" class="sidebar-link">TypeScript 2.4</a></li><li><a href="/Typescript-manual/download/zh/release-notes/typescript-2.3.html" class="sidebar-link">TypeScript 2.3</a></li><li><a href="/Typescript-manual/download/zh/release-notes/typescript-2.2.html" class="sidebar-link">TypeScript 2.2</a></li><li><a href="/Typescript-manual/download/zh/release-notes/typescript-2.1.html" class="sidebar-link">TypeScript 2.1</a></li><li><a href="/Typescript-manual/download/zh/release-notes/typescript-2.0.html" class="sidebar-link">TypeScript 2.0</a></li><li><a href="/Typescript-manual/download/zh/release-notes/typescript-1.8.html" class="sidebar-link">TypeScript 1.8</a></li><li><a href="/Typescript-manual/download/zh/release-notes/typescript-1.7.html" class="sidebar-link">TypeScript 1.7</a></li><li><a href="/Typescript-manual/download/zh/release-notes/typescript-1.6.html" class="sidebar-link">TypeScript 1.6</a></li><li><a href="/Typescript-manual/download/zh/release-notes/typescript-1.5.html" class="sidebar-link">TypeScript 1.5</a></li><li><a href="/Typescript-manual/download/zh/release-notes/typescript-1.4.html" class="sidebar-link">TypeScript 1.4</a></li><li><a href="/Typescript-manual/download/zh/release-notes/typescript-1.3.html" class="sidebar-link">TypeScript 1.3</a></li><li><a href="/Typescript-manual/download/zh/release-notes/typescript-1.1.html" class="sidebar-link">TypeScript 1.1</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Breaking Changes</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Typescript-manual/download/zh/breaking-changes/typescript-3.6.html" class="sidebar-link">TypeScript 3.6</a></li><li><a href="/Typescript-manual/download/zh/breaking-changes/typescript-3.5.html" class="sidebar-link">TypeScript 3.5</a></li><li><a href="/Typescript-manual/download/zh/breaking-changes/typescript-3.4.html" class="sidebar-link">TypeScript 3.4</a></li><li><a href="/Typescript-manual/download/zh/breaking-changes/typescript-3.2.html" class="sidebar-link">TypeScript 3.2</a></li><li><a href="/Typescript-manual/download/zh/breaking-changes/typescript-3.1.html" class="sidebar-link">TypeScript 3.1</a></li><li><a href="/Typescript-manual/download/zh/breaking-changes/typescript-3.0.html" class="sidebar-link">TypeScript 3.0</a></li><li><a href="/Typescript-manual/download/zh/breaking-changes/typescript-2.9.html" class="sidebar-link">TypeScript 2.9</a></li><li><a href="/Typescript-manual/download/zh/breaking-changes/typescript-2.8.html" class="sidebar-link">TypeScript 2.8</a></li><li><a href="/Typescript-manual/download/zh/breaking-changes/typescript-2.7.html" class="sidebar-link">TypeScript 2.7</a></li><li><a href="/Typescript-manual/download/zh/breaking-changes/typescript-2.6.html" class="sidebar-link">TypeScript 2.6</a></li><li><a href="/Typescript-manual/download/zh/breaking-changes/typescript-2.4.html" class="sidebar-link">TypeScript 2.4</a></li><li><a href="/Typescript-manual/download/zh/breaking-changes/typescript-2.3.html" class="sidebar-link">TypeScript 2.3</a></li><li><a href="/Typescript-manual/download/zh/breaking-changes/typescript-2.2.html" class="sidebar-link">TypeScript 2.2</a></li><li><a href="/Typescript-manual/download/zh/breaking-changes/typescript-2.1.html" class="sidebar-link">TypeScript 2.1</a></li><li><a href="/Typescript-manual/download/zh/breaking-changes/typescript-2.0.html" class="sidebar-link">TypeScript 2.0</a></li><li><a href="/Typescript-manual/download/zh/breaking-changes/typescript-1.8.html" class="sidebar-link">TypeScript 1.8</a></li><li><a href="/Typescript-manual/download/zh/breaking-changes/typescript-1.7.html" class="sidebar-link">TypeScript 1.7</a></li><li><a href="/Typescript-manual/download/zh/breaking-changes/typescript-1.6.html" class="sidebar-link">TypeScript 1.6</a></li><li><a href="/Typescript-manual/download/zh/breaking-changes/typescript-1.5.html" class="sidebar-link">TypeScript 1.5</a></li><li><a href="/Typescript-manual/download/zh/breaking-changes/typescript-1.4.html" class="sidebar-link">TypeScript 1.4</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="typescript-4-1"><a href="#typescript-4-1" class="header-anchor">#</a> TypeScript 4.1</h1> <h2 id="模版字面量类型"><a href="#模版字面量类型" class="header-anchor">#</a> 模版字面量类型</h2> <p>使用字符串字面量类型能够表示仅接受特定字符串参数的函数和 API。</p> <div class="language-ts twoslash extra-class"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token function">setVerticalAlignment</span><span class="token punctuation">(</span>location<span class="token operator">:</span> <span class="token string">'top'</span> <span class="token operator">|</span> <span class="token string">'middle'</span> <span class="token operator">|</span> <span class="token string">'bottom'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>

<span class="token function">setVerticalAlignment</span><span class="token punctuation">(</span><span class="token string">'middel'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//                   ^^^^^^^^</span>
<span class="token comment">// Argument of type '&quot;middel&quot;' is not assignable to parameter of type '&quot;top&quot; | &quot;middle&quot; | &quot;bottom&quot;'.</span>
</code></pre></div><p>使用字符串字面量类型的好处是它能够对字符串进行拼写检查。</p> <p>此外，字符串字面量还能用于映射类型中的属性名。
从这个意义上来讲，它们可被当作构件使用。</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">Options</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span><span class="token constant">K</span> <span class="token keyword">in</span> <span class="token string">'noImplicitAny'</span> <span class="token operator">|</span> <span class="token string">'strictNullChecks'</span> <span class="token operator">|</span> <span class="token string">'strictFunctionTypes'</span><span class="token punctuation">]</span><span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// same as</span>
<span class="token comment">//   type Options = {</span>
<span class="token comment">//       noImplicitAny?: boolean,</span>
<span class="token comment">//       strictNullChecks?: boolean,</span>
<span class="token comment">//       strictFunctionTypes?: boolean</span>
<span class="token comment">//   };</span>
</code></pre></div><p>还有一处字符串字面量类型可被当作构件使用，那就是在构造其它字符串字面量类型时。</p> <p>这也是 TypeScript 4.1 支持模版字面量类型的原因。
它的语法与<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Template_literals" target="_blank" rel="noopener noreferrer"> JavaScript 中的模版字面量<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>的语法是一致的，但是是用在表示类型的位置上。
当将其与具体类型结合使用时，它会将字符串拼接并产生一个新的字符串字面量类型。</p> <div class="language-ts twoslash extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">World</span> <span class="token operator">=</span> <span class="token string">'world'</span><span class="token punctuation">;</span>

<span class="token keyword">type</span> <span class="token class-name">Greeting</span> <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">hello </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>World<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token comment">//   ^^^^^^^^^</span>
<span class="token comment">//   &quot;hello world&quot;</span>
</code></pre></div><p>如果在替换的位置上使用了联合类型会怎么样呢？
它将生成由各个联合类型成员所表示的字符串字面量类型的联合。</p> <div class="language-ts twoslash extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">Color</span> <span class="token operator">=</span> <span class="token string">'red'</span> <span class="token operator">|</span> <span class="token string">'blue'</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name">Quantity</span> <span class="token operator">=</span> <span class="token string">'one'</span> <span class="token operator">|</span> <span class="token string">'two'</span><span class="token punctuation">;</span>

<span class="token keyword">type</span> <span class="token class-name">SeussFish</span> <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Quantity <span class="token operator">|</span> Color<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> fish</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token comment">//   ^^^^^^^^^</span>
<span class="token comment">//   &quot;one fish&quot; | &quot;two fish&quot; | &quot;red fish&quot; | &quot;blue fish&quot;</span>
</code></pre></div><p>除此之外，我们也可以在其它场景中应用它。
例如，有些 UI 组件库提供了指定垂直和水平对齐的 API，通常会使用类似于 <code>&quot;bottom-right&quot;</code>  的字符串来同时指定。
在垂直对齐的选项 <code>&quot;top&quot;</code> ， <code>&quot;middle&quot;</code>  和 <code>&quot;bottom&quot;</code> ，以及水平对齐的选项 <code>&quot;left&quot;</code> ， <code>&quot;center&quot;</code>  和 <code>&quot;right&quot;</code>  之间，共有 9 种可能的字符串，前者选项之一与后者选项之一之间使用短横线连接。</p> <div class="language-ts twoslash extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">VerticalAlignment</span> <span class="token operator">=</span> <span class="token string">'top'</span> <span class="token operator">|</span> <span class="token string">'middle'</span> <span class="token operator">|</span> <span class="token string">'bottom'</span><span class="token punctuation">;</span>
<span class="token keyword">type</span> <span class="token class-name">HorizontalAlignment</span> <span class="token operator">=</span> <span class="token string">'left'</span> <span class="token operator">|</span> <span class="token string">'center'</span> <span class="token operator">|</span> <span class="token string">'right'</span><span class="token punctuation">;</span>

<span class="token comment">// Takes</span>
<span class="token comment">//   | &quot;top-left&quot;    | &quot;top-center&quot;    | &quot;top-right&quot;</span>
<span class="token comment">//   | &quot;middle-left&quot; | &quot;middle-center&quot; | &quot;middle-right&quot;</span>
<span class="token comment">//   | &quot;bottom-left&quot; | &quot;bottom-center&quot; | &quot;bottom-right&quot;</span>

<span class="token keyword">declare</span> <span class="token keyword">function</span> <span class="token function">setAlignment</span><span class="token punctuation">(</span>
  value<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>VerticalAlignment<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>HorizontalAlignment<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>

<span class="token function">setAlignment</span><span class="token punctuation">(</span><span class="token string">'top-left'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// works!</span>
<span class="token function">setAlignment</span><span class="token punctuation">(</span><span class="token string">'top-middel'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// error!</span>
<span class="token function">setAlignment</span><span class="token punctuation">(</span><span class="token string">'top-pot'</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// error! but good doughnuts if you're ever in Seattle</span>
</code></pre></div><p>这样的例子还有很多，但它仍只是小例子而已，因为我们可以直接写出所有可能的值。
实际上，对于 9 个字符串来讲还算可以；但是如果需要大量的字符串，你就得考虑如何去自动生成（或者简单地使用 <code>string</code> ）。</p> <p>有些值实际上是来自于动态创建的字符串字面量。
例如，假设  <code>makeWatchedObject</code>  API 接收一个对象，并生成一个几乎等同的对象，但是带有一个新的 <code>on</code>  方法来检测属性的变化。</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">let</span> person <span class="token operator">=</span> <span class="token function">makeWatchedObject</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  firstName<span class="token operator">:</span> <span class="token string">'Homer'</span><span class="token punctuation">,</span>
  age<span class="token operator">:</span> <span class="token number">42</span><span class="token punctuation">,</span>
  location<span class="token operator">:</span> <span class="token string">'Springfield'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

person<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'firstNameChanged'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">firstName was changed!</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>注意， <code>on</code>  监听的是 <code>&quot;firstNameChanged&quot;</code>  事件，而非仅仅是 <code>&quot;firstName&quot;</code> 。
那么我们如何定义类型？</p> <div class="language-ts twslash extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">PropEventSource<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">on</span><span class="token punctuation">(</span>eventName<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token builtin">string</span> <span class="token operator">&amp;</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">Changed</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token function-variable function">callback</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">/// Create a &quot;watched object&quot; with an 'on' method</span>
<span class="token comment">/// so that you can watch for changes to properties.</span>
<span class="token keyword">declare</span> <span class="token keyword">function</span> <span class="token generic-function"><span class="token function">makeWatchedObject</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>obj<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">T</span> <span class="token operator">&amp;</span> PropEventSource<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
</code></pre></div><p>这样做的话，如果传入了错误的属性会产生一个错误！</p> <div class="language-ts twoslash extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">PropEventSource<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token function">on</span><span class="token punctuation">(</span>eventName<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token builtin">string</span> <span class="token operator">&amp;</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">Changed</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> <span class="token function-variable function">callback</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">declare</span> <span class="token keyword">function</span> <span class="token generic-function"><span class="token function">makeWatchedObject</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>obj<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">T</span> <span class="token operator">&amp;</span> PropEventSource<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token keyword">let</span> person <span class="token operator">=</span> <span class="token function">makeWatchedObject</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  firstName<span class="token operator">:</span> <span class="token string">'Homer'</span><span class="token punctuation">,</span>
  age<span class="token operator">:</span> <span class="token number">42</span><span class="token punctuation">,</span>
  location<span class="token operator">:</span> <span class="token string">'Springfield'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// error!</span>
person<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'firstName'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// error!</span>
person<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'frstNameChanged'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>我们还可以在模版字面量上做一些其它的事情：可以从替换的位置来<em>推断</em>类型。
我们将上面的例子改写成泛型，由 <code>eventName</code>  字符串来推断关联的属性名。</p> <div class="language-ts twoslash extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">PropEventSource<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token generic-function"><span class="token function">on</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">K</span> <span class="token keyword">extends</span> <span class="token builtin">string</span> <span class="token operator">&amp;</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>
    eventName<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token constant">K</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">Changed</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span>
    <span class="token function-variable function">callback</span><span class="token operator">:</span> <span class="token punctuation">(</span>newValue<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">K</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token keyword">void</span>
  <span class="token punctuation">)</span><span class="token operator">:</span> <span class="token keyword">void</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">declare</span> <span class="token keyword">function</span> <span class="token generic-function"><span class="token function">makeWatchedObject</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>obj<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">T</span> <span class="token operator">&amp;</span> PropEventSource<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> person <span class="token operator">=</span> <span class="token function">makeWatchedObject</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  firstName<span class="token operator">:</span> <span class="token string">'Homer'</span><span class="token punctuation">,</span>
  age<span class="token operator">:</span> <span class="token number">42</span><span class="token punctuation">,</span>
  location<span class="token operator">:</span> <span class="token string">'Springfield'</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// works! 'newName' is typed as 'string'</span>
person<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'firstNameChanged'</span><span class="token punctuation">,</span> newName <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// 'newName' has the type of 'firstName'</span>
  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">new name is </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>newName<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// works! 'newAge' is typed as 'number'</span>
person<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'ageChanged'</span><span class="token punctuation">,</span> newAge <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>newAge <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'warning! negative age'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>这里我们将 <code>on</code>  定义为泛型方法。
当用户使用 <code>&quot;firstNameChanged'</code>  来调用该方法，TypeScript 会尝试去推断出 <code>K</code>  所表示的类型。
为此，它尝试将 <code>K</code>  与 <code>&quot;Changed&quot;</code>  之前的内容进行匹配并推断出 <code>&quot;firstName&quot;</code> 。
一旦 TypeScript 得到了结果， <code>on</code>  方法就能够从原对象上获取 <code>firstName</code>  的类型，此例中是 <code>string</code> 。
类似地，当使用 <code>&quot;ageChanged&quot;</code>  调用时，它会找到属性 <code>age</code>  的类型为 <code>number</code> 。</p> <p>类型推断可以用不同的方式组合，常见的是解构字符串，再使用其它方式重新构造它们。
实际上，为了便于修改字符串字面量类型，我们引入了一些新的工具类型来修改字符大小写。</p> <div class="language-ts twoslash extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">EnthusiasticGreeting<span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Uppercase<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>

<span class="token keyword">type</span> <span class="token class-name"><span class="token constant">HELLO</span></span> <span class="token operator">=</span> EnthusiasticGreeting<span class="token operator">&lt;</span><span class="token string">'hello'</span><span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token comment">//   ^^^^^</span>
<span class="token comment">//   &quot;HELLO&quot;</span>
</code></pre></div><p>新的类型别名为 <code>Uppercase</code> ， <code>Lowercase</code> ， <code>Capitalize</code>  和 <code>Uncapitalize</code> 。
前两个会转换字符串中的所有字符，而后面两个只转换字符串的首字母。</p> <p>更多详情，<a href="https://github.com/microsoft/TypeScript/pull/40336" target="_blank" rel="noopener noreferrer">查看原 PR<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 以及<a href="https://github.com/microsoft/TypeScript/pull/40580" target="_blank" rel="noopener noreferrer">正在进行中的切换类型别名助手的 PR<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <h2 id="在映射类型中更改映射的键"><a href="#在映射类型中更改映射的键" class="header-anchor">#</a> 在映射类型中更改映射的键</h2> <p>让我们先回顾一下，映射类型可以使用任意的键来创建新的对象类型。</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">Options</span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span><span class="token constant">K</span> <span class="token keyword">in</span> <span class="token string">'noImplicitAny'</span> <span class="token operator">|</span> <span class="token string">'strictNullChecks'</span> <span class="token operator">|</span> <span class="token string">'strictFunctionTypes'</span><span class="token punctuation">]</span><span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">boolean</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// same as</span>
<span class="token comment">//   type Options = {</span>
<span class="token comment">//       noImplicitAny?: boolean,</span>
<span class="token comment">//       strictNullChecks?: boolean,</span>
<span class="token comment">//       strictFunctionTypes?: boolean</span>
<span class="token comment">//   };</span>
</code></pre></div><p>或者，基于任意的对象类型来创建新的对象类型。</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">/// 'Partial&lt;T&gt;' 等同于 'T'，只是把每个属性标记为可选的。</span>
<span class="token keyword">type</span> <span class="token class-name">Partial<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span><span class="token constant">K</span> <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">T</span><span class="token punctuation">]</span><span class="token operator">?</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">K</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>到目前为止，映射类型只能使用提供给它的键来创建新的对象类型；然而，很多时候我们想要创建新的键，或者过滤掉某些键。</p> <p>这就是 TypeScript 4.1 允许更改映射类型中的键的原因。它使用了新的 <code>as</code>  语句。</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">MappedTypeWithNewKeys<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span><span class="token constant">K</span> <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">T</span> <span class="token keyword">as</span> NewKeyType<span class="token punctuation">]</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">K</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token comment">//            ^^^^^^^^^^^^^</span>
  <span class="token comment">//            这里是新的语法！</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p>通过 <code>as</code>  语句，你可以利用例如模版字面量类型，并基于原属性名来轻松地创建新属性名。</p> <div class="language-ts twoslash extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">Getters<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span><span class="token constant">K</span> <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">T</span> <span class="token keyword">as</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">get</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>Capitalize<span class="token operator">&lt;</span><span class="token builtin">string</span> <span class="token operator">&amp;</span> <span class="token constant">K</span><span class="token operator">&gt;</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">K</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">interface</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  location<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">LazyPerson</span> <span class="token operator">=</span> Getters<span class="token operator">&lt;</span>Person<span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token comment">// type LazyPerson = {</span>
<span class="token comment">//     getName: () =&gt; string;</span>
<span class="token comment">//     getAge: () =&gt; number;</span>
<span class="token comment">//     getLocation: () =&gt; string;</span>
<span class="token comment">// }</span>
</code></pre></div><p>此外，你可以巧用 <code>never</code>  类型来过滤掉某些键。
也就是说，在某些情况下你不必使用 <code>Omit</code>  工具类型。</p> <div class="language-ts twoslash extra-class"><pre class="language-ts"><code><span class="token comment">// 删除 'kind' 属性</span>
<span class="token keyword">type</span> <span class="token class-name">RemoveKindField<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span><span class="token constant">K</span> <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">T</span> <span class="token keyword">as</span> Exclude<span class="token operator">&lt;</span><span class="token constant">K</span><span class="token punctuation">,</span> <span class="token string">'kind'</span><span class="token operator">&gt;</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">K</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">interface</span> <span class="token class-name">Circle</span> <span class="token punctuation">{</span>
  kind<span class="token operator">:</span> <span class="token string">'circle'</span><span class="token punctuation">;</span>
  radius<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">KindlessCircle</span> <span class="token operator">=</span> RemoveKindField<span class="token operator">&lt;</span>Circle<span class="token operator">&gt;</span><span class="token punctuation">;</span>

<span class="token keyword">type</span> <span class="token class-name">RemoveKindField<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token punctuation">[</span><span class="token constant">K</span> <span class="token keyword">in</span> <span class="token keyword">keyof</span> <span class="token constant">T</span> <span class="token keyword">as</span> Exclude<span class="token operator">&lt;</span><span class="token constant">K</span><span class="token punctuation">,</span> <span class="token string">'kind'</span><span class="token operator">&gt;</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">[</span><span class="token constant">K</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">interface</span> <span class="token class-name">Circle</span> <span class="token punctuation">{</span>
  kind<span class="token operator">:</span> <span class="token string">'circle'</span><span class="token punctuation">;</span>
  radius<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> <span class="token class-name">KindlessCircle</span> <span class="token operator">=</span> RemoveKindField<span class="token operator">&lt;</span>Circle<span class="token operator">&gt;</span><span class="token punctuation">;</span>
<span class="token comment">// type KindlessCircle = {</span>
<span class="token comment">//     radius: number;</span>
<span class="token comment">// }</span>
</code></pre></div><p>更多详情，请参考<a href="https://github.com/microsoft/TypeScript/pull/40336" target="_blank" rel="noopener noreferrer"> PR<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <h2 id="递归的有条件类型"><a href="#递归的有条件类型" class="header-anchor">#</a> 递归的有条件类型</h2> <p>在 JavaScript 中较为常见的是，一个函数能够以任意的层级来展平（flatten）并构建容器类型。
例如，可以拿 <code>Promise</code>  实例对象上的 <code>.then()</code>  方法来举例。
 <code>.then(...)</code>  方法能够拆解每一个 <code>Promise</code> ，直到它找到一个非 <code>Promise</code>  的值，然后将该值传递给回调函数。
 <code>Array</code>  上也存在一个相对较新的 <code>flat</code>  方法，它接收一个表示深度的参数，并以此来决定展平操作的层数。</p> <p>在过去，我们无法使用 TypeScript 类型系统来表达上述例子。
虽然也存在一些 hack，但基本上都不切合实际。</p> <p>TypeScript 4.1 取消了对有条件类型的一些限制 - 因此它现在可以表达上述类型。
在 TypeScript 4.1 中，允许在有条件类型的分支中立即引用该有条件类型自身，这就使得编写递归的类型别名变得更加容易。
例如，我们想定义一个类型来获取嵌套数组中的元素类型，可以定义如下的 <code>deepFlatten</code>  类型。</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">ElementType<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name">ReadonlyArray<span class="token operator">&lt;</span><span class="token keyword">infer</span> <span class="token constant">U</span><span class="token operator">&gt;</span></span> <span class="token operator">?</span> ElementType<span class="token operator">&lt;</span><span class="token constant">U</span><span class="token operator">&gt;</span> <span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token generic-function"><span class="token function">deepFlatten</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token keyword">readonly</span> <span class="token builtin">unknown</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">)</span><span class="token operator">:</span> ElementType<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token punctuation">{</span>
  <span class="token keyword">throw</span> <span class="token string">'not implemented'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// All of these return the type 'number[]':</span>
<span class="token function">deepFlatten</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">deepFlatten</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">deepFlatten</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>类似地，在 TypeScript 4.1 中我们可以定义 <code>Awaited</code>  类型来拆解 <code>Promise</code> 。</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">Awaited<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name">PromiseLike<span class="token operator">&lt;</span><span class="token keyword">infer</span> <span class="token constant">U</span><span class="token operator">&gt;</span></span> <span class="token operator">?</span> Awaited<span class="token operator">&lt;</span><span class="token constant">U</span><span class="token operator">&gt;</span> <span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">;</span>

<span class="token comment">/// 类似于 `promise.then(...)`，但是类型更准确</span>
<span class="token keyword">declare</span> <span class="token keyword">function</span> <span class="token generic-function"><span class="token function">customThen</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">U</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>
  p<span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">,</span>
  <span class="token function-variable function">onFulfilled</span><span class="token operator">:</span> <span class="token punctuation">(</span>value<span class="token operator">:</span> Awaited<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token constant">U</span>
<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&lt;</span>Awaited<span class="token operator">&lt;</span><span class="token constant">U</span><span class="token operator">&gt;&gt;</span><span class="token punctuation">;</span>
</code></pre></div><p>一定要注意，虽然这些递归类型很强大，但要有节制地使用它。</p> <p>首先，这些类型能做的更多，但也会增加类型检查的耗时。
尝试为考拉兹猜想或斐波那契数列建模是一件有趣的事儿，但请不要在 npm 上发布带有它们的 <code>.d.ts</code>  文件。</p> <p>除了计算量大之外，这些类型还可能会达到内置的递归深度限制。
如果到达了递归深度限制，则会产生编译错误。
通常来讲，最好不要去定义这样的类型。</p> <p>更多详情，请参考<a href="https://github.com/microsoft/TypeScript/pull/40002" target="_blank" rel="noopener noreferrer"> PR<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <h2 id="索引访问类型检查-nouncheckedindexedaccess"><a href="#索引访问类型检查-nouncheckedindexedaccess" class="header-anchor">#</a> 索引访问类型检查（ <code>--noUncheckedIndexedAccess</code> ）</h2> <p>TypeScript 支持一个叫做<em>索引签名</em>的功能。
索引签名用于告诉类型系统，用户可以访问任意名称的属性。</p> <div class="language-ts twoslash extra-class"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">Options</span> <span class="token punctuation">{</span>
  path<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  permissions<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>

  <span class="token comment">// 额外的属性可以被这个签名捕获</span>
  <span class="token punctuation">[</span>propName<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">checkOptions</span><span class="token punctuation">(</span>opts<span class="token operator">:</span> Options<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  opts<span class="token punctuation">.</span>path<span class="token punctuation">;</span> <span class="token comment">// string</span>
  opts<span class="token punctuation">.</span>permissions<span class="token punctuation">;</span> <span class="token comment">// number</span>

  <span class="token comment">// 以下都是允许的</span>
  <span class="token comment">// 它们的类型为 'string | number'</span>
  opts<span class="token punctuation">.</span>yadda<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  opts<span class="token punctuation">[</span><span class="token string">'foo bar baz'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  opts<span class="token punctuation">[</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>上例中， <code>Options</code>  包含了索引签名，它表示在访问未直接列出的属性时得到的类型为 <code>string | number</code> 。
这是一种乐观的做法，它假想我们非常清楚代码在做什么，但实际上 JavaScript 中的大部分值并不支持任意的属性名。
例如，大多数类型并不包含属性名为 <code>Math.random()</code>  的值。
对许多用户来讲，这不是期望的行为，就好像没有利用到 <code>--strictNullChecks</code>  提供的严格类型检查。</p> <p>这就是 TypeScript 4.1 提供了 <code>--noUncheckedIndexedAccess</code>  编译选项的原因。
在该新模式下，任何属性访问（例如 <code>foo.bar</code> ）或者索引访问（例如 <code>foo[&quot;bar&quot;]</code> ）都会被认为可能为 <code>undefined</code> 。
例如在上例中， <code>opts.yadda</code>  的类型为 <code>string | number | undefined</code> ，而不是 <code>string | number</code> 。
如果需要访问那个属性，你可以先检查属性是否存在或者使用非空断言运算符（ <code>!</code>  后缀字符）。</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// @noUncheckedIndexedAccess</span>
<span class="token keyword">interface</span> <span class="token class-name">Options</span> <span class="token punctuation">{</span>
  path<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  permissions<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>

  <span class="token comment">// 额外的属性可以被这个签名捕获</span>
  <span class="token punctuation">[</span>propName<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// ---cut---</span>
<span class="token keyword">function</span> <span class="token function">checkOptions</span><span class="token punctuation">(</span>opts<span class="token operator">:</span> Options<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  opts<span class="token punctuation">.</span>path<span class="token punctuation">;</span> <span class="token comment">// string</span>
  opts<span class="token punctuation">.</span>permissions<span class="token punctuation">;</span> <span class="token comment">// number</span>

  <span class="token comment">// 在 noUncheckedIndexedAccess 下，以下操作不允许</span>
  opts<span class="token punctuation">.</span>yadda<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  opts<span class="token punctuation">[</span><span class="token string">'foo bar baz'</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  opts<span class="token punctuation">[</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// 首先检查是否存在</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>opts<span class="token punctuation">.</span>yadda<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>opts<span class="token punctuation">.</span>yadda<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 使用 ! 非空断言，“我知道在做什么”</span>
  opts<span class="token punctuation">.</span>yadda<span class="token operator">!</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>使用 <code>--noUncheckedIndexedAccess</code>  的一个结果是，通过索引访问数组元素时也会进行严格类型检查，就算是在遍历检查过边界的数组时。</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// @noUncheckedIndexedAccess</span>
<span class="token keyword">function</span> <span class="token function">screamLines</span><span class="token punctuation">(</span>strs<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 下面会有问题</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> strs<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>strs<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>如果你不需要使用索引，那么可以使用 <code>for</code> - <code>of</code>  循环或 <code>forEach</code>  来遍历。</p> <div class="language-ts twoslash extra-class"><pre class="language-ts"><code><span class="token comment">// @noUncheckedIndexedAccess</span>
<span class="token keyword">function</span> <span class="token function">screamLines</span><span class="token punctuation">(</span>strs<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 可以正常工作</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> str <span class="token keyword">of</span> strs<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// 可以正常工作</span>
  strs<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>str <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>str<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这个选项虽可以用来捕获访问越界的错误，但对大多数代码来讲有些烦，因此它不会被 <code>--strict</code>  选项自动启用；然而，如果你对此选项感兴趣，可以尝试一下，看它是否适用于你的代码。</p> <p>更多详情，请参考<a href="https://github.com/microsoft/TypeScript/pull/39560" target="_blank" rel="noopener noreferrer"> PR<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>.</p> <h2 id="不带-baseurl-的-paths"><a href="#不带-baseurl-的-paths" class="header-anchor">#</a> 不带  <code>baseUrl</code>  的  <code>paths</code></h2> <p>路径映射的使用很常见 - 通常它用于优化导入语句，以及模拟在单一代码仓库中进行链接的行为。</p> <p>不幸的是，在使用 <code>paths</code>  时必须指定 <code>baseUrl</code> ，它允许裸路径描述符基于 <code>baseUrl</code>  进行解析。
它会导致在自动导入时会使用较差的路径。</p> <p>在 TypeScript 4.1 中， <code>paths</code>  不必与 <code>baseUrl</code>  一起使用。
它会一定程序上帮助解决上述的问题。</p> <h2 id="checkjs-默认启用-allowjs"><a href="#checkjs-默认启用-allowjs" class="header-anchor">#</a> <code>checkJs</code>  默认启用  <code>allowJs</code></h2> <p>从前，如果你想要对 JavaScript 工程执行类型检查，你需要同时启用 <code>allowJs</code>  和 <code>checkJs</code> 。
这样的体验让人讨厌，因此现在 <code>checkJs</code>  会默认启用 <code>allowJs</code> 。</p> <p>更多详情，请参考<a href="https://github.com/microsoft/TypeScript/pull/40275" target="_blank" rel="noopener noreferrer"> PR<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <h2 id="react-17-jsx-工厂"><a href="#react-17-jsx-工厂" class="header-anchor">#</a> React 17 JSX 工厂</h2> <p>TypeScript 4.1 通过以下两个编译选项来支持 React 17 中的 <code>jsx</code>  和 <code>jsxs</code>  工厂函数：</p> <ul><li><code>react-jsx</code></li> <li><code>react-jsxdev</code></li></ul> <p>这两个编译选项分别用于生产环境和开发环境中。
通常，编译选项之间可以继承。
例如，用于生产环境的 <code>tsconfig.json</code>  如下：</p> <div class="language-json tsconfig extra-class"><pre class="language-json"><code><span class="token comment">// ./src/tsconfig.json</span>
<span class="token punctuation">{</span>
  <span class="token property">&quot;compilerOptions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;module&quot;</span><span class="token operator">:</span> <span class="token string">&quot;esnext&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;target&quot;</span><span class="token operator">:</span> <span class="token string">&quot;es2015&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;jsx&quot;</span><span class="token operator">:</span> <span class="token string">&quot;react-jsx&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;strict&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;include&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">&quot;./**/*&quot;</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><p>另外一个用于开发环境的 <code>tsconfig.json</code>  如下：</p> <div class="language-json tsconfig extra-class"><pre class="language-json"><code><span class="token comment">// ./src/tsconfig.dev.json</span>
<span class="token punctuation">{</span>
  <span class="token property">&quot;extends&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./tsconfig.json&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;compilerOptions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;jsx&quot;</span><span class="token operator">:</span> <span class="token string">&quot;react-jsxdev&quot;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>更多详情，请参考<a href="https://github.com/microsoft/TypeScript/pull/39199" target="_blank" rel="noopener noreferrer"> PR<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <h2 id="在编辑器中支持-jsdoc-see-标签"><a href="#在编辑器中支持-jsdoc-see-标签" class="header-anchor">#</a> 在编辑器中支持 JSDoc  <code>@see</code>  标签</h2> <p>编辑器对 TypeScript 和 JavaScript 代码中的 JSDoc 标签 <code>@see</code>  有了更好的支持。
它允许你使用像 “跳转到定义” 这样的功能。
例如，在下例中的 JSDoc 里可以使用跳转到定义到 <code>first</code>  或 <code>C</code> 。</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// @filename: first.ts</span>
<span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name"><span class="token constant">C</span></span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token comment">// @filename: main.ts</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> first <span class="token keyword">from</span> <span class="token string">'./first'</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * @see first.C
 */</span>
<span class="token keyword">function</span> <span class="token function">related</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
</code></pre></div><p>感谢贡献者<a href="https://github.com/Kingwl" target="_blank" rel="noopener noreferrer"> Wenlu Wang<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a><a href="https://github.com/microsoft/TypeScript/pull/39760" target="_blank" rel="noopener noreferrer"> 实现了这个功能<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>！</p> <h2 id="破坏性改动"><a href="#破坏性改动" class="header-anchor">#</a> 破坏性改动</h2> <h3 id="lib-d-ts-更新"><a href="#lib-d-ts-更新" class="header-anchor">#</a> <code>lib.d.ts</code>  更新</h3> <p><code>lib.d.ts</code>  包含一些 API 变动，在某种程度上是因为 DOM 类型是自动生成的。
一个具体的变动是 <code>Reflect.enumerate</code>  被删除了，因为它在 ES2016 中被删除了。</p> <h3 id="abstract-成员不能被标记为-async"><a href="#abstract-成员不能被标记为-async" class="header-anchor">#</a> <code>abstract</code>  成员不能被标记为  <code>async</code></h3> <p><code>abstract</code>  成员不再可以被标记为 <code>async</code> 。
这可以通过删除 <code>async</code>  关键字来修复，因为调用者只关注返回值类型。</p> <h3 id="any-unknown-are-propagated-in-falsy-positions"><a href="#any-unknown-are-propagated-in-falsy-positions" class="header-anchor">#</a> <code>any</code> / <code>unknown</code>  Are Propagated in Falsy Positions</h3> <p>从前，对于表达式 <code>foo &amp;&amp; somethingElse</code> ，若 <code>foo</code>  的类型为 <code>any</code>  或 <code>unknown</code> ，那么整个表达式的类型为 <code>somethingElse</code> 。</p> <p>例如，在以前此处的 <code>x</code>  的类型为 <code>{ someProp: string }</code> 。</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">declare</span> <span class="token keyword">let</span> foo<span class="token operator">:</span> <span class="token builtin">unknown</span><span class="token punctuation">;</span>
<span class="token keyword">declare</span> <span class="token keyword">let</span> somethingElse<span class="token operator">:</span> <span class="token punctuation">{</span> someProp<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> x <span class="token operator">=</span> foo <span class="token operator">&amp;&amp;</span> somethingElse<span class="token punctuation">;</span>
</code></pre></div><p>然而，在 TypeScript 4.1 中，会更谨慎地确定该类型。
由于不清楚 <code>&amp;&amp;</code>  左侧的类型，我们会传递 <code>any</code>  和 <code>unknown</code>  类型，而不是 <code>&amp;&amp;</code>  右侧的类型。</p> <p>常见的模式是检查与 <code>boolean</code>  的兼容性，尤其是在谓词函数中。</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token function">isThing</span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">boolean</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> x <span class="token operator">&amp;&amp;</span> <span class="token keyword">typeof</span> x <span class="token operator">===</span> <span class="token string">'object'</span> <span class="token operator">&amp;&amp;</span> x<span class="token punctuation">.</span>blah <span class="token operator">===</span> <span class="token string">'foo'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>一种合适的修改是使用 <code>!!foo &amp;&amp; someExpression</code>  来代替 <code>foo &amp;&amp; someExpression</code> 。</p> <h3 id="promise的resolve的参数不再是可选的"><a href="#promise的resolve的参数不再是可选的" class="header-anchor">#</a> <code>Promise</code>  的 <code>resolve</code>  的参数不再是可选的</h3> <p>在编写如下的代码时</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">new</span> <span class="token class-name"><span class="token builtin">Promise</span></span><span class="token punctuation">(</span>resolve <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token function">doSomethingAsync</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>你可能会得到如下的错误：</p> <div class="language-ts extra-class"><pre class="language-ts"><code>  <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token operator">~</span><span class="token operator">~</span><span class="token operator">~</span><span class="token operator">~</span><span class="token operator">~</span><span class="token operator">~</span><span class="token operator">~</span><span class="token operator">~</span><span class="token operator">~</span>
error <span class="token constant">TS2554</span><span class="token operator">:</span> Expected <span class="token number">1</span> arguments<span class="token punctuation">,</span> but got <span class="token number">0.</span>
  An argument <span class="token keyword">for</span> <span class="token string">'value'</span> was not provided<span class="token punctuation">.</span>
</code></pre></div><p>这是因为 <code>resolve</code>  不再有可选参数，因此默认情况下，必须给它传值。
它通常能够捕获 <code>Promise</code>  的 bug。
典型的修复方法是传入正确的参数，以及添加明确的类型参数。</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">new</span> <span class="token class-name"><span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token builtin">number</span><span class="token operator">&gt;</span></span><span class="token punctuation">(</span>resolve <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">//     ^^^^^^^^</span>
  <span class="token function">doSomethingAsync</span><span class="token punctuation">(</span>value <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//      ^^^^^</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>然而，有时 <code>resolve()</code>  确实需要不带参数来调用
在这种情况下，我们可以给 <code>Promise</code>  传入明确的 <code>void</code>  泛型类型参数（例如， <code>Promise&lt;void&gt;</code> ）。
它利用了 TypeScript 4.1 中的一个新功能，一个潜在的 <code>void</code>  类型的末尾参数会变成可选参数。</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">new</span> <span class="token class-name"><span class="token builtin">Promise</span><span class="token operator">&lt;</span><span class="token keyword">void</span><span class="token operator">&gt;</span></span><span class="token punctuation">(</span>resolve <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">//     ^^^^^^</span>
  <span class="token function">doSomethingAsync</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>TypeScript 4.1 提供了快速修复选项来解决该问题。</p> <h3 id="有条件展开会创建可选属性"><a href="#有条件展开会创建可选属性" class="header-anchor">#</a> 有条件展开会创建可选属性</h3> <p>在 JavaScript 中，对象展开（例如， <code>{ ...foo }</code> ）不会操作假值。
因此，在 <code>{ ...foo }</code>  代码中，如果 <code>foo</code>  的值为 <code>null</code>  或 <code>undefined</code> ，则它会被略过。</p> <p>很多人利用该性质来可选地展开属性。</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">interface</span> <span class="token class-name">Person</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
  location<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">interface</span> <span class="token class-name">Animal</span> <span class="token punctuation">{</span>
  name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
  owner<span class="token operator">:</span> Person<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">copyOwner</span><span class="token punctuation">(</span>pet<span class="token operator">?</span><span class="token operator">:</span> Animal<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span><span class="token punctuation">(</span>pet <span class="token operator">&amp;&amp;</span> pet<span class="token punctuation">.</span>owner<span class="token punctuation">)</span><span class="token punctuation">,</span>
    otherStuff<span class="token operator">:</span> <span class="token number">123</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// We could also use optional chaining here:</span>

<span class="token keyword">function</span> <span class="token function">copyOwner</span><span class="token punctuation">(</span>pet<span class="token operator">?</span><span class="token operator">:</span> Animal<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token operator">...</span>pet<span class="token operator">?.</span>owner<span class="token punctuation">,</span>
    otherStuff<span class="token operator">:</span> <span class="token number">123</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>此处，如果 <code>pet</code>  定义了，那么 <code>pet.owner</code>  的属性会被展开 - 否则，不会有属性被展开到目标对象中。</p> <p>在之前， <code>copyOwner</code>  的返回值类型为基于每个展开运算结果的联合类型：
The return type of  <code>copyOwner</code>  was previously a union type based on each spread:</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token punctuation">{</span> x<span class="token operator">:</span> <span class="token builtin">number</span> <span class="token punctuation">}</span> <span class="token operator">|</span> <span class="token punctuation">{</span> x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> name<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> age<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">,</span> location<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">}</span>
</code></pre></div><p>它精确地展示了操作是如何进行的：如果 <code>pet</code>  定义了，那么 <code>Person</code>  中的所有属性都存在；否则，在结果中不存在 <code>Person</code>  中的任何属性。
它是一种要么全有要么全无的的操作。</p> <p>然而，我们发现这个模式被过度地使用了，在单一对象中存在数以百计的展开运算，每一个展开操作可能会添加成百上千的操作。
结果就是这项操作可能非常耗时，并且用处不大。</p> <p>在 TypeScript 4.1 中，返回值类型有时会使用全部的可选类型。</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token punctuation">{</span>
    x<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    name<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
    age<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
    location<span class="token operator">?</span><span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这样的结果是有更好的性能以及更佳地展示。</p> <p>更多详情，请参考<a href="https://github.com/microsoft/TypeScript/pull/40778" target="_blank" rel="noopener noreferrer"> PR<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。
目前，该行为还不完全一致，我们期待在未来会有所改进。</p> <h3 id="unmatched-parameters-are-no-longer-related"><a href="#unmatched-parameters-are-no-longer-related" class="header-anchor">#</a> Unmatched parameters are no longer related</h3> <p>从前 TypeScript 在关联参数时，如果参数之间没有联系，则会将其关联为 <code>any</code>  类型。
由于<a href="https://github.com/microsoft/TypeScript/pull/41308" target="_blank" rel="noopener noreferrer"> TypeScript 4.1 的改动<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，TypeScript 会完全跳过这个过程。
这意味着一些可赋值性检查会失败，同时也意味着重载解析可能会失败。
例如，在解析 Node.js 中 <code>util.promisify</code>  函数的重载时可能会选择不同的重载签名，这可能会导致产生新的错误。</p> <p>做为一个变通方法，你可能需要使用类型断言来消除错误。</p></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/Typescript-manual/download/zh/release-notes/typescript-4.2.html" class="prev">
        TypeScript 4.2
      </a></span> <span class="next"><a href="/Typescript-manual/download/zh/release-notes/typescript-4.0.html">
        TypeScript 4.0
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/Typescript-manual/assets/js/app.1593970b.js" defer></script><script src="/Typescript-manual/assets/js/2.f0d70486.js" defer></script><script src="/Typescript-manual/assets/js/1.93812fe5.js" defer></script><script src="/Typescript-manual/assets/js/151.a761bf9b.js" defer></script>
  </body>
</html>

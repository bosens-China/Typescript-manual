<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>TypeScript 5.4 | TypeScript手册</title>
    <meta name="generator" content="VuePress 1.9.10">
    <link rel="icon" href="/Typescript-manual/favicon.png">
    <meta name="description" content="TypeScript是JavaScript类型的超集，它可以编译成纯JavaScript。
  TypeScript可以在任何浏览器、任何计算机和任何操作系统上运行，并且是开源的。">
    <meta name="viewport" content="width=device-width, initial-scale=1.0,user-scalable=no, viewport-fit=cover">
    <meta name="keywords" content="typescript,docs,手册,文档">
    <meta name="author" content="boses">
    <meta name="google" content="notranslate">
    
    <link rel="preload" href="/Typescript-manual/assets/css/0.styles.237d6e09.css" as="style"><link rel="preload" href="/Typescript-manual/assets/js/app.1593970b.js" as="script"><link rel="preload" href="/Typescript-manual/assets/js/2.f0d70486.js" as="script"><link rel="preload" href="/Typescript-manual/assets/js/1.93812fe5.js" as="script"><link rel="preload" href="/Typescript-manual/assets/js/164.210d1a22.js" as="script"><link rel="prefetch" href="/Typescript-manual/assets/js/10.4762e221.js"><link rel="prefetch" href="/Typescript-manual/assets/js/100.d9e46ceb.js"><link rel="prefetch" href="/Typescript-manual/assets/js/101.b135bd55.js"><link rel="prefetch" href="/Typescript-manual/assets/js/102.eb03502d.js"><link rel="prefetch" href="/Typescript-manual/assets/js/103.6d45baa7.js"><link rel="prefetch" href="/Typescript-manual/assets/js/104.9282c1ea.js"><link rel="prefetch" href="/Typescript-manual/assets/js/105.7c026097.js"><link rel="prefetch" href="/Typescript-manual/assets/js/106.1a54e046.js"><link rel="prefetch" href="/Typescript-manual/assets/js/107.c7455d6c.js"><link rel="prefetch" href="/Typescript-manual/assets/js/108.9910413b.js"><link rel="prefetch" href="/Typescript-manual/assets/js/109.7326eb25.js"><link rel="prefetch" href="/Typescript-manual/assets/js/11.87c69216.js"><link rel="prefetch" href="/Typescript-manual/assets/js/110.cc92b634.js"><link rel="prefetch" href="/Typescript-manual/assets/js/111.040b77ba.js"><link rel="prefetch" href="/Typescript-manual/assets/js/112.e6fe143c.js"><link rel="prefetch" href="/Typescript-manual/assets/js/113.ae192573.js"><link rel="prefetch" href="/Typescript-manual/assets/js/114.fb65c1e1.js"><link rel="prefetch" href="/Typescript-manual/assets/js/115.c01cfbd6.js"><link rel="prefetch" href="/Typescript-manual/assets/js/116.02c6ca5f.js"><link rel="prefetch" href="/Typescript-manual/assets/js/117.66129e9d.js"><link rel="prefetch" href="/Typescript-manual/assets/js/118.6a1c9db2.js"><link rel="prefetch" href="/Typescript-manual/assets/js/119.e744a988.js"><link rel="prefetch" href="/Typescript-manual/assets/js/12.4babe899.js"><link rel="prefetch" href="/Typescript-manual/assets/js/120.795aa6be.js"><link rel="prefetch" href="/Typescript-manual/assets/js/121.577dd2ed.js"><link rel="prefetch" href="/Typescript-manual/assets/js/122.287b1f13.js"><link rel="prefetch" href="/Typescript-manual/assets/js/123.8043a050.js"><link rel="prefetch" href="/Typescript-manual/assets/js/124.7c6f56cf.js"><link rel="prefetch" href="/Typescript-manual/assets/js/125.c8a9a013.js"><link rel="prefetch" href="/Typescript-manual/assets/js/126.e64eccdd.js"><link rel="prefetch" href="/Typescript-manual/assets/js/127.3029a53e.js"><link rel="prefetch" href="/Typescript-manual/assets/js/128.654e2397.js"><link rel="prefetch" href="/Typescript-manual/assets/js/129.cb4fc6c0.js"><link rel="prefetch" href="/Typescript-manual/assets/js/13.5ab5050a.js"><link rel="prefetch" href="/Typescript-manual/assets/js/130.c6b9a006.js"><link rel="prefetch" href="/Typescript-manual/assets/js/131.1cebdbee.js"><link rel="prefetch" href="/Typescript-manual/assets/js/132.2620ecb5.js"><link rel="prefetch" href="/Typescript-manual/assets/js/133.7f53bf1f.js"><link rel="prefetch" href="/Typescript-manual/assets/js/134.129702c6.js"><link rel="prefetch" href="/Typescript-manual/assets/js/135.8f4d5357.js"><link rel="prefetch" href="/Typescript-manual/assets/js/136.e17df536.js"><link rel="prefetch" href="/Typescript-manual/assets/js/137.ff13fde2.js"><link rel="prefetch" href="/Typescript-manual/assets/js/138.fb3636c3.js"><link rel="prefetch" href="/Typescript-manual/assets/js/139.f8beedc3.js"><link rel="prefetch" href="/Typescript-manual/assets/js/14.7a250a11.js"><link rel="prefetch" href="/Typescript-manual/assets/js/140.3daa1308.js"><link rel="prefetch" href="/Typescript-manual/assets/js/141.bb090054.js"><link rel="prefetch" href="/Typescript-manual/assets/js/142.fed938ad.js"><link rel="prefetch" href="/Typescript-manual/assets/js/143.a3b29462.js"><link rel="prefetch" href="/Typescript-manual/assets/js/144.c09dd4b2.js"><link rel="prefetch" href="/Typescript-manual/assets/js/145.ffc8125a.js"><link rel="prefetch" href="/Typescript-manual/assets/js/146.743057fc.js"><link rel="prefetch" href="/Typescript-manual/assets/js/147.ac8ef52d.js"><link rel="prefetch" href="/Typescript-manual/assets/js/148.6d5e8ae5.js"><link rel="prefetch" href="/Typescript-manual/assets/js/149.341c6a4f.js"><link rel="prefetch" href="/Typescript-manual/assets/js/15.fd694870.js"><link rel="prefetch" href="/Typescript-manual/assets/js/150.31a051f2.js"><link rel="prefetch" href="/Typescript-manual/assets/js/151.a761bf9b.js"><link rel="prefetch" href="/Typescript-manual/assets/js/152.32ee780e.js"><link rel="prefetch" href="/Typescript-manual/assets/js/153.1e2f2b44.js"><link rel="prefetch" href="/Typescript-manual/assets/js/154.bc25bc22.js"><link rel="prefetch" href="/Typescript-manual/assets/js/155.fb17da55.js"><link rel="prefetch" href="/Typescript-manual/assets/js/156.651a9c2e.js"><link rel="prefetch" href="/Typescript-manual/assets/js/157.adca0669.js"><link rel="prefetch" href="/Typescript-manual/assets/js/158.a3abc67d.js"><link rel="prefetch" href="/Typescript-manual/assets/js/159.c2445408.js"><link rel="prefetch" href="/Typescript-manual/assets/js/16.a882cd43.js"><link rel="prefetch" href="/Typescript-manual/assets/js/160.c6a27367.js"><link rel="prefetch" href="/Typescript-manual/assets/js/161.b312e41a.js"><link rel="prefetch" href="/Typescript-manual/assets/js/162.3287bbbd.js"><link rel="prefetch" href="/Typescript-manual/assets/js/163.47be0007.js"><link rel="prefetch" href="/Typescript-manual/assets/js/165.7482c1f3.js"><link rel="prefetch" href="/Typescript-manual/assets/js/166.45c6e113.js"><link rel="prefetch" href="/Typescript-manual/assets/js/167.2eebcd57.js"><link rel="prefetch" href="/Typescript-manual/assets/js/168.b3d23364.js"><link rel="prefetch" href="/Typescript-manual/assets/js/169.c924ff86.js"><link rel="prefetch" href="/Typescript-manual/assets/js/17.76d6950f.js"><link rel="prefetch" href="/Typescript-manual/assets/js/170.03ef2fa9.js"><link rel="prefetch" href="/Typescript-manual/assets/js/171.34187668.js"><link rel="prefetch" href="/Typescript-manual/assets/js/172.635bb738.js"><link rel="prefetch" href="/Typescript-manual/assets/js/173.6bbe41b6.js"><link rel="prefetch" href="/Typescript-manual/assets/js/174.e442febc.js"><link rel="prefetch" href="/Typescript-manual/assets/js/175.41bb67ab.js"><link rel="prefetch" href="/Typescript-manual/assets/js/176.49120c59.js"><link rel="prefetch" href="/Typescript-manual/assets/js/177.c523f572.js"><link rel="prefetch" href="/Typescript-manual/assets/js/178.9423ebb2.js"><link rel="prefetch" href="/Typescript-manual/assets/js/179.dda7f960.js"><link rel="prefetch" href="/Typescript-manual/assets/js/18.cac3cb70.js"><link rel="prefetch" href="/Typescript-manual/assets/js/180.4dfba409.js"><link rel="prefetch" href="/Typescript-manual/assets/js/181.e4f017a7.js"><link rel="prefetch" href="/Typescript-manual/assets/js/182.547e085d.js"><link rel="prefetch" href="/Typescript-manual/assets/js/183.5acbdd59.js"><link rel="prefetch" href="/Typescript-manual/assets/js/19.04e9bc02.js"><link rel="prefetch" href="/Typescript-manual/assets/js/20.68aa1956.js"><link rel="prefetch" href="/Typescript-manual/assets/js/21.d9e46a4f.js"><link rel="prefetch" href="/Typescript-manual/assets/js/22.f23e5600.js"><link rel="prefetch" href="/Typescript-manual/assets/js/23.1a6c395d.js"><link rel="prefetch" href="/Typescript-manual/assets/js/24.c4122643.js"><link rel="prefetch" href="/Typescript-manual/assets/js/25.25881907.js"><link rel="prefetch" href="/Typescript-manual/assets/js/26.b5d956b1.js"><link rel="prefetch" href="/Typescript-manual/assets/js/27.ee846739.js"><link rel="prefetch" href="/Typescript-manual/assets/js/28.ba1574f7.js"><link rel="prefetch" href="/Typescript-manual/assets/js/29.32e60931.js"><link rel="prefetch" href="/Typescript-manual/assets/js/3.c0ad6938.js"><link rel="prefetch" href="/Typescript-manual/assets/js/30.3b6cd0b7.js"><link rel="prefetch" href="/Typescript-manual/assets/js/31.0a11a38c.js"><link rel="prefetch" href="/Typescript-manual/assets/js/32.f159c8e6.js"><link rel="prefetch" href="/Typescript-manual/assets/js/33.1ef243d1.js"><link rel="prefetch" href="/Typescript-manual/assets/js/34.f01c876d.js"><link rel="prefetch" href="/Typescript-manual/assets/js/35.8bfdb28b.js"><link rel="prefetch" href="/Typescript-manual/assets/js/36.fdd0ba51.js"><link rel="prefetch" href="/Typescript-manual/assets/js/37.3f218ce6.js"><link rel="prefetch" href="/Typescript-manual/assets/js/38.f8226620.js"><link rel="prefetch" href="/Typescript-manual/assets/js/39.e7d5d326.js"><link rel="prefetch" href="/Typescript-manual/assets/js/4.038d7f28.js"><link rel="prefetch" href="/Typescript-manual/assets/js/40.7a4cb0fe.js"><link rel="prefetch" href="/Typescript-manual/assets/js/41.494af996.js"><link rel="prefetch" href="/Typescript-manual/assets/js/42.304eae27.js"><link rel="prefetch" href="/Typescript-manual/assets/js/43.769a064a.js"><link rel="prefetch" href="/Typescript-manual/assets/js/44.9b36658c.js"><link rel="prefetch" href="/Typescript-manual/assets/js/45.1038e1df.js"><link rel="prefetch" href="/Typescript-manual/assets/js/46.65baf8d4.js"><link rel="prefetch" href="/Typescript-manual/assets/js/47.7b66616f.js"><link rel="prefetch" href="/Typescript-manual/assets/js/48.0e91f3a4.js"><link rel="prefetch" href="/Typescript-manual/assets/js/49.b7f1bb44.js"><link rel="prefetch" href="/Typescript-manual/assets/js/5.64774910.js"><link rel="prefetch" href="/Typescript-manual/assets/js/50.045dee0d.js"><link rel="prefetch" href="/Typescript-manual/assets/js/51.f4d25851.js"><link rel="prefetch" href="/Typescript-manual/assets/js/52.488e3de2.js"><link rel="prefetch" href="/Typescript-manual/assets/js/53.24bf50d9.js"><link rel="prefetch" href="/Typescript-manual/assets/js/54.2342813a.js"><link rel="prefetch" href="/Typescript-manual/assets/js/55.ba7136ba.js"><link rel="prefetch" href="/Typescript-manual/assets/js/56.34586136.js"><link rel="prefetch" href="/Typescript-manual/assets/js/57.55444e9b.js"><link rel="prefetch" href="/Typescript-manual/assets/js/58.6e7dd2c6.js"><link rel="prefetch" href="/Typescript-manual/assets/js/59.6907c3e4.js"><link rel="prefetch" href="/Typescript-manual/assets/js/6.cfb80da4.js"><link rel="prefetch" href="/Typescript-manual/assets/js/60.f7c33e9f.js"><link rel="prefetch" href="/Typescript-manual/assets/js/61.d887d15b.js"><link rel="prefetch" href="/Typescript-manual/assets/js/62.eeb4a1af.js"><link rel="prefetch" href="/Typescript-manual/assets/js/63.166ceb13.js"><link rel="prefetch" href="/Typescript-manual/assets/js/64.e5f91c57.js"><link rel="prefetch" href="/Typescript-manual/assets/js/65.f37d6448.js"><link rel="prefetch" href="/Typescript-manual/assets/js/66.67a6098b.js"><link rel="prefetch" href="/Typescript-manual/assets/js/67.98342e87.js"><link rel="prefetch" href="/Typescript-manual/assets/js/68.0eca9faa.js"><link rel="prefetch" href="/Typescript-manual/assets/js/69.accb09f1.js"><link rel="prefetch" href="/Typescript-manual/assets/js/7.3c60c652.js"><link rel="prefetch" href="/Typescript-manual/assets/js/70.df1bb896.js"><link rel="prefetch" href="/Typescript-manual/assets/js/71.65b4584b.js"><link rel="prefetch" href="/Typescript-manual/assets/js/72.5ad16533.js"><link rel="prefetch" href="/Typescript-manual/assets/js/73.222e0f4f.js"><link rel="prefetch" href="/Typescript-manual/assets/js/74.6d364488.js"><link rel="prefetch" href="/Typescript-manual/assets/js/75.f08ef413.js"><link rel="prefetch" href="/Typescript-manual/assets/js/76.06f71fc6.js"><link rel="prefetch" href="/Typescript-manual/assets/js/77.51c40296.js"><link rel="prefetch" href="/Typescript-manual/assets/js/78.e858e4ab.js"><link rel="prefetch" href="/Typescript-manual/assets/js/79.44e29644.js"><link rel="prefetch" href="/Typescript-manual/assets/js/80.b67dcf99.js"><link rel="prefetch" href="/Typescript-manual/assets/js/81.b7cea060.js"><link rel="prefetch" href="/Typescript-manual/assets/js/82.6441a0a3.js"><link rel="prefetch" href="/Typescript-manual/assets/js/83.03f2f860.js"><link rel="prefetch" href="/Typescript-manual/assets/js/84.070382e8.js"><link rel="prefetch" href="/Typescript-manual/assets/js/85.7a10baf5.js"><link rel="prefetch" href="/Typescript-manual/assets/js/86.52448263.js"><link rel="prefetch" href="/Typescript-manual/assets/js/87.3e28b70e.js"><link rel="prefetch" href="/Typescript-manual/assets/js/88.ac603069.js"><link rel="prefetch" href="/Typescript-manual/assets/js/89.d8fc6c9d.js"><link rel="prefetch" href="/Typescript-manual/assets/js/90.061b7bae.js"><link rel="prefetch" href="/Typescript-manual/assets/js/91.085c8066.js"><link rel="prefetch" href="/Typescript-manual/assets/js/92.f91f3791.js"><link rel="prefetch" href="/Typescript-manual/assets/js/93.222df328.js"><link rel="prefetch" href="/Typescript-manual/assets/js/94.a419988b.js"><link rel="prefetch" href="/Typescript-manual/assets/js/95.ab410dec.js"><link rel="prefetch" href="/Typescript-manual/assets/js/96.d094c11b.js"><link rel="prefetch" href="/Typescript-manual/assets/js/97.a32b936b.js"><link rel="prefetch" href="/Typescript-manual/assets/js/98.86d54546.js"><link rel="prefetch" href="/Typescript-manual/assets/js/99.fe0b2436.js"><link rel="prefetch" href="/Typescript-manual/assets/js/vendors~docsearch.8e5b54b3.js">
    <link rel="stylesheet" href="/Typescript-manual/assets/css/0.styles.237d6e09.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/Typescript-manual/" class="home-link router-link-active"><!----> <span class="site-name">TypeScript手册</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/Typescript-manual/describe/" class="nav-link">
  进入目录
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="友情链接菜单" class="dropdown-title"><span class="title">友情链接</span> <span class="arrow down"></span></button> <button type="button" aria-label="友情链接菜单" class="mobile-dropdown-title"><span class="title">友情链接</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://jkchao.github.io/typescript-book-chinese/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  深入理解 TypeScript
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://ts.xcatliu.com/introduction/hello-typescript" target="_blank" rel="noopener noreferrer" class="nav-link external">
  hello-typescript
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://www.typescriptlang.org/docs/home.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  TypeScript手册（英文版）
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/Microsoft/TypeScript/blob/master/doc/spec.md" target="_blank" rel="noopener noreferrer" class="nav-link external">
  TypeScript语言规范
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/zhongsp/TypeScript/blob/master/CONTRIBUTING.md" target="_blank" rel="noopener noreferrer" class="nav-link external">
  参与贡献
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="https://github.com/bosens-China/Typescript-manual" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/bosens-China/Typescript-manual/issues" target="_blank" rel="noopener noreferrer" class="nav-link external">
  问题反馈
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/Typescript-manual/describe/" class="nav-link">
  进入目录
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="友情链接菜单" class="dropdown-title"><span class="title">友情链接</span> <span class="arrow down"></span></button> <button type="button" aria-label="友情链接菜单" class="mobile-dropdown-title"><span class="title">友情链接</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="https://jkchao.github.io/typescript-book-chinese/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  深入理解 TypeScript
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://ts.xcatliu.com/introduction/hello-typescript" target="_blank" rel="noopener noreferrer" class="nav-link external">
  hello-typescript
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="http://www.typescriptlang.org/docs/home.html" target="_blank" rel="noopener noreferrer" class="nav-link external">
  TypeScript手册（英文版）
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/Microsoft/TypeScript/blob/master/doc/spec.md" target="_blank" rel="noopener noreferrer" class="nav-link external">
  TypeScript语言规范
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li><li class="dropdown-item"><!----> <a href="https://github.com/zhongsp/TypeScript/blob/master/CONTRIBUTING.md" target="_blank" rel="noopener noreferrer" class="nav-link external">
  参与贡献
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div></div><div class="nav-item"><a href="https://github.com/bosens-China/Typescript-manual" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><a href="https://github.com/bosens-China/Typescript-manual/issues" target="_blank" rel="noopener noreferrer" class="nav-link external">
  问题反馈
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/Typescript-manual/describe/" class="sidebar-link">前言</a></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>快速上手</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Typescript-manual/download/zh/tutorials/typescript-in-5-minutes.html" class="sidebar-link">5 分钟了解 TypeScript</a></li><li><a href="/Typescript-manual/download/zh/tutorials/asp.net-core.html" class="sidebar-link">ASP.NET Core</a></li><li><a href="/Typescript-manual/download/zh/tutorials/asp.net-4.html" class="sidebar-link">ASP.NET 4</a></li><li><a href="/Typescript-manual/download/zh/tutorials/gulp.html" class="sidebar-link">Gulp</a></li><li><a href="/Typescript-manual/download/zh/tutorials/knockout.html" class="sidebar-link">Knockout.js</a></li><li><a href="/Typescript-manual/download/zh/tutorials/react-and-webpack.html" class="sidebar-link">React 与 webpack</a></li><li><a href="/Typescript-manual/download/zh/tutorials/react.html" class="sidebar-link">React</a></li><li><a href="/Typescript-manual/download/zh/tutorials/angular-2.html" class="sidebar-link">Angular 2</a></li><li><a href="/Typescript-manual/download/zh/tutorials/migrating-from-javascript.html" class="sidebar-link">从 JavaScript 迁移到 TypeScript</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>手册</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Typescript-manual/download/zh/handbook/basic-types.html" class="sidebar-link">基础类型</a></li><li><a href="/Typescript-manual/download/zh/handbook/interfaces.html" class="sidebar-link">接口</a></li><li><a href="/Typescript-manual/download/zh/handbook/functions.html" class="sidebar-link">函数</a></li><li><a href="/Typescript-manual/download/zh/handbook/literal-types.html" class="sidebar-link">字面量类型</a></li><li><a href="/Typescript-manual/download/zh/handbook/unions-and-intersections.html" class="sidebar-link">联合类型和交叉类型</a></li><li><a href="/Typescript-manual/download/zh/handbook/classes.html" class="sidebar-link">类</a></li><li><a href="/Typescript-manual/download/zh/handbook/enums.html" class="sidebar-link">枚举</a></li><li><a href="/Typescript-manual/download/zh/handbook/generics.html" class="sidebar-link">泛型</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>手册（进阶）</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Typescript-manual/download/zh/reference/advanced-types.html" class="sidebar-link">高级类型</a></li><li><a href="/Typescript-manual/download/zh/reference/utility-types.html" class="sidebar-link">实用工具类型</a></li><li><a href="/Typescript-manual/download/zh/reference/decorators.html" class="sidebar-link">Decorators</a></li><li><a href="/Typescript-manual/download/zh/reference/declaration-merging.html" class="sidebar-link">声明合并</a></li><li><a href="/Typescript-manual/download/zh/reference/iterators-and-generators.html" class="sidebar-link">Iterators 和 Generators</a></li><li><a href="/Typescript-manual/download/zh/reference/jsx.html" class="sidebar-link">JSX</a></li><li><a href="/Typescript-manual/download/zh/reference/mixins.html" class="sidebar-link">混入</a></li><li><a href="/Typescript-manual/download/zh/reference/modules.html" class="sidebar-link">模块</a></li><li><a href="/Typescript-manual/download/zh/reference/module-resolution.html" class="sidebar-link">模块解析</a></li><li><a href="/Typescript-manual/download/zh/reference/namespaces.html" class="sidebar-link">命名空间</a></li><li><a href="/Typescript-manual/download/zh/reference/namespaces-and-modules.html" class="sidebar-link">命名空间和模块</a></li><li><a href="/Typescript-manual/download/zh/reference/symbols.html" class="sidebar-link">Symbols</a></li><li><a href="/Typescript-manual/download/zh/reference/triple-slash-directives.html" class="sidebar-link">三斜线指令</a></li><li><a href="/Typescript-manual/download/zh/reference/type-compatibility.html" class="sidebar-link">类型兼容性</a></li><li><a href="/Typescript-manual/download/zh/reference/type-inference.html" class="sidebar-link">类型推论</a></li><li><a href="/Typescript-manual/download/zh/reference/variable-declarations.html" class="sidebar-link">变量声明</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>手册（v2）
</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Typescript-manual/download/zh/handbook-v2/type-manipulation/template-literal-types.html" class="sidebar-link">模版字面量类型</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>如何书写声明文件</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Typescript-manual/download/zh/declaration-files/introduction.html" class="sidebar-link">介绍</a></li><li><a href="/Typescript-manual/download/zh/declaration-files/by-example.html" class="sidebar-link">举例</a></li><li><a href="/Typescript-manual/download/zh/declaration-files/library-structures.html" class="sidebar-link">库结构</a></li><li><a href="/Typescript-manual/download/zh/declaration-files/templates.html" class="sidebar-link">模板</a></li><li><a href="/Typescript-manual/download/zh/declaration-files/do-s-and-don-ts.html" class="sidebar-link">最佳实践</a></li><li><a href="/Typescript-manual/download/zh/declaration-files/deep-dive.html" class="sidebar-link">深入</a></li><li><a href="/Typescript-manual/download/zh/declaration-files/publishing.html" class="sidebar-link">发布</a></li><li><a href="/Typescript-manual/download/zh/declaration-files/consumption.html" class="sidebar-link">使用</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>JavaScript
</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Typescript-manual/download/zh/javascript/type-checking-javascript-files.html" class="sidebar-link">JavaScript 文件里的类型检查</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>工程配置</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Typescript-manual/download/zh/project-config/tsconfig.json.html" class="sidebar-link">tsconfig.json</a></li><li><a href="/Typescript-manual/download/zh/project-config/project-references.html" class="sidebar-link">工程引用</a></li><li><a href="/Typescript-manual/download/zh/project-config/typings-for-npm-packages.html" class="sidebar-link">NPM 包的类型</a></li><li><a href="/Typescript-manual/download/zh/project-config/compiler-options.html" class="sidebar-link">编译选项</a></li><li><a href="/Typescript-manual/download/zh/project-config/configuring-watch.html" class="sidebar-link">配置 Watch</a></li><li><a href="/Typescript-manual/download/zh/project-config/compiler-options-in-msbuild.html" class="sidebar-link">在 MSBuild 里使用编译选项</a></li><li><a href="/Typescript-manual/download/zh/project-config/integrating-with-build-tools.html" class="sidebar-link">与其它构建工具整合</a></li><li><a href="/Typescript-manual/download/zh/project-config/nightly-builds.html" class="sidebar-link">使用 TypeScript 的每日构建版本</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Wiki</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Typescript-manual/download/zh/wiki/this-in-typescript.html" class="sidebar-link">TypeScript 里的 this</a></li><li><a href="/Typescript-manual/download/zh/wiki/coding_guidelines.html" class="sidebar-link">编码规范</a></li><li><a href="/Typescript-manual/download/zh/wiki/common-errors.html" class="sidebar-link">常见编译错误</a></li><li><a href="/Typescript-manual/download/zh/wiki/typescript-editor-support.html" class="sidebar-link">支持 TypeScript 的编辑器</a></li><li><a href="/Typescript-manual/download/zh/wiki/using-typescript-with-asp.net-5.html" class="sidebar-link">结合 ASP.NET v5 使用 TypeScript</a></li><li><a href="/Typescript-manual/download/zh/wiki/architectural-overview.html" class="sidebar-link">架构概述</a></li><li><a href="/Typescript-manual/download/zh/wiki/roadmap.html" class="sidebar-link">发展路线图</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>新增功能</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Typescript-manual/download/zh/release-notes/typescript-5.7.html" class="sidebar-link">TypeScript 5.7</a></li><li><a href="/Typescript-manual/download/zh/release-notes/typescript-5.6.html" class="sidebar-link">TypeScript 5.6</a></li><li><a href="/Typescript-manual/download/zh/release-notes/typescript-5.5.html" class="sidebar-link">TypeScript 5.5</a></li><li><a href="/Typescript-manual/download/zh/release-notes/typescript-5.4.html" aria-current="page" class="active sidebar-link">TypeScript 5.4</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Typescript-manual/download/zh/release-notes/typescript-5.4.html#从最后一次赋值以后-在闭包中保留类型细化" class="sidebar-link">从最后一次赋值以后，在闭包中保留类型细化</a></li><li class="sidebar-sub-header"><a href="/Typescript-manual/download/zh/release-notes/typescript-5.4.html#noinfer-工具类型" class="sidebar-link">NoInfer 工具类型</a></li><li class="sidebar-sub-header"><a href="/Typescript-manual/download/zh/release-notes/typescript-5.4.html#object-groupby-和-map-groupby" class="sidebar-link">Object.groupBy 和 Map.groupBy</a></li><li class="sidebar-sub-header"><a href="/Typescript-manual/download/zh/release-notes/typescript-5.4.html#支持在-moduleresolution-bundler-和-module-preserve-时-使用-require" class="sidebar-link">支持在 --moduleResolution bundler 和 --module preserve 时 使用 require()</a></li><li class="sidebar-sub-header"><a href="/Typescript-manual/download/zh/release-notes/typescript-5.4.html#检查导入属性和断言" class="sidebar-link">检查导入属性和断言</a></li><li class="sidebar-sub-header"><a href="/Typescript-manual/download/zh/release-notes/typescript-5.4.html#快速修复-添加缺失参数" class="sidebar-link">快速修复：添加缺失参数</a></li><li class="sidebar-sub-header"><a href="/Typescript-manual/download/zh/release-notes/typescript-5.4.html#子路径导入支持自动导入" class="sidebar-link">子路径导入支持自动导入</a></li><li class="sidebar-sub-header"><a href="/Typescript-manual/download/zh/release-notes/typescript-5.4.html#即将到来的-typescript-5-0-弃用功能" class="sidebar-link">即将到来的 TypeScript 5.0 弃用功能</a></li><li class="sidebar-sub-header"><a href="/Typescript-manual/download/zh/release-notes/typescript-5.4.html#值得注意的行为改变" class="sidebar-link">值得注意的行为改变</a></li></ul></li><li><a href="/Typescript-manual/download/zh/release-notes/typescript-5.3.html" class="sidebar-link">TypeScript 5.3</a></li><li><a href="/Typescript-manual/download/zh/release-notes/typescript-5.2.html" class="sidebar-link">TypeScript 5.2</a></li><li><a href="/Typescript-manual/download/zh/release-notes/typescript-5.1.html" class="sidebar-link">TypeScript 5.1</a></li><li><a href="/Typescript-manual/download/zh/release-notes/typescript-5.0.html" class="sidebar-link">TypeScript 5.0</a></li><li><a href="/Typescript-manual/download/zh/release-notes/typescript-4.9.html" class="sidebar-link">TypeScript 4.9</a></li><li><a href="/Typescript-manual/download/zh/release-notes/typescript-4.8.html" class="sidebar-link">TypeScript 4.8</a></li><li><a href="/Typescript-manual/download/zh/release-notes/typescript-4.7.html" class="sidebar-link">TypeScript 4.7</a></li><li><a href="/Typescript-manual/download/zh/release-notes/typescript-4.6.html" class="sidebar-link">TypeScript 4.6</a></li><li><a href="/Typescript-manual/download/zh/release-notes/typescript-4.5.html" class="sidebar-link">TypeScript 4.5</a></li><li><a href="/Typescript-manual/download/zh/release-notes/typescript-4.4.html" class="sidebar-link">TypeScript 4.4</a></li><li><a href="/Typescript-manual/download/zh/release-notes/typescript-4.3.html" class="sidebar-link">TypeScript 4.3</a></li><li><a href="/Typescript-manual/download/zh/release-notes/typescript-4.2.html" class="sidebar-link">TypeScript 4.2</a></li><li><a href="/Typescript-manual/download/zh/release-notes/typescript-4.1.html" class="sidebar-link">TypeScript 4.1</a></li><li><a href="/Typescript-manual/download/zh/release-notes/typescript-4.0.html" class="sidebar-link">TypeScript 4.0</a></li><li><a href="/Typescript-manual/download/zh/release-notes/typescript-3.9.html" class="sidebar-link">TypeScript 3.9</a></li><li><a href="/Typescript-manual/download/zh/release-notes/typescript-3.8.html" class="sidebar-link">TypeScript 3.8</a></li><li><a href="/Typescript-manual/download/zh/release-notes/typescript-3.7.html" class="sidebar-link">TypeScript 3.7</a></li><li><a href="/Typescript-manual/download/zh/release-notes/typescript-3.6.html" class="sidebar-link">TypeScript 3.6</a></li><li><a href="/Typescript-manual/download/zh/release-notes/typescript-3.5.html" class="sidebar-link">TypeScript 3.5</a></li><li><a href="/Typescript-manual/download/zh/release-notes/typescript-3.4.html" class="sidebar-link">TypeScript 3.4</a></li><li><a href="/Typescript-manual/download/zh/release-notes/typescript-3.3.html" class="sidebar-link">TypeScript 3.3</a></li><li><a href="/Typescript-manual/download/zh/release-notes/typescript-3.2.html" class="sidebar-link">TypeScript 3.2</a></li><li><a href="/Typescript-manual/download/zh/release-notes/typescript-3.1.html" class="sidebar-link">TypeScript 3.1</a></li><li><a href="/Typescript-manual/download/zh/release-notes/typescript-3.0.html" class="sidebar-link">TypeScript 3.0</a></li><li><a href="/Typescript-manual/download/zh/release-notes/typescript-2.9.html" class="sidebar-link">TypeScript 2.9</a></li><li><a href="/Typescript-manual/download/zh/release-notes/typescript-2.8.html" class="sidebar-link">TypeScript 2.8</a></li><li><a href="/Typescript-manual/download/zh/release-notes/typescript-2.7.html" class="sidebar-link">TypeScript 2.7</a></li><li><a href="/Typescript-manual/download/zh/release-notes/typescript-2.6.html" class="sidebar-link">TypeScript 2.6</a></li><li><a href="/Typescript-manual/download/zh/release-notes/typescript-2.5.html" class="sidebar-link">TypeScript 2.5</a></li><li><a href="/Typescript-manual/download/zh/release-notes/typescript-2.4.html" class="sidebar-link">TypeScript 2.4</a></li><li><a href="/Typescript-manual/download/zh/release-notes/typescript-2.3.html" class="sidebar-link">TypeScript 2.3</a></li><li><a href="/Typescript-manual/download/zh/release-notes/typescript-2.2.html" class="sidebar-link">TypeScript 2.2</a></li><li><a href="/Typescript-manual/download/zh/release-notes/typescript-2.1.html" class="sidebar-link">TypeScript 2.1</a></li><li><a href="/Typescript-manual/download/zh/release-notes/typescript-2.0.html" class="sidebar-link">TypeScript 2.0</a></li><li><a href="/Typescript-manual/download/zh/release-notes/typescript-1.8.html" class="sidebar-link">TypeScript 1.8</a></li><li><a href="/Typescript-manual/download/zh/release-notes/typescript-1.7.html" class="sidebar-link">TypeScript 1.7</a></li><li><a href="/Typescript-manual/download/zh/release-notes/typescript-1.6.html" class="sidebar-link">TypeScript 1.6</a></li><li><a href="/Typescript-manual/download/zh/release-notes/typescript-1.5.html" class="sidebar-link">TypeScript 1.5</a></li><li><a href="/Typescript-manual/download/zh/release-notes/typescript-1.4.html" class="sidebar-link">TypeScript 1.4</a></li><li><a href="/Typescript-manual/download/zh/release-notes/typescript-1.3.html" class="sidebar-link">TypeScript 1.3</a></li><li><a href="/Typescript-manual/download/zh/release-notes/typescript-1.1.html" class="sidebar-link">TypeScript 1.1</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Breaking Changes</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Typescript-manual/download/zh/breaking-changes/typescript-3.6.html" class="sidebar-link">TypeScript 3.6</a></li><li><a href="/Typescript-manual/download/zh/breaking-changes/typescript-3.5.html" class="sidebar-link">TypeScript 3.5</a></li><li><a href="/Typescript-manual/download/zh/breaking-changes/typescript-3.4.html" class="sidebar-link">TypeScript 3.4</a></li><li><a href="/Typescript-manual/download/zh/breaking-changes/typescript-3.2.html" class="sidebar-link">TypeScript 3.2</a></li><li><a href="/Typescript-manual/download/zh/breaking-changes/typescript-3.1.html" class="sidebar-link">TypeScript 3.1</a></li><li><a href="/Typescript-manual/download/zh/breaking-changes/typescript-3.0.html" class="sidebar-link">TypeScript 3.0</a></li><li><a href="/Typescript-manual/download/zh/breaking-changes/typescript-2.9.html" class="sidebar-link">TypeScript 2.9</a></li><li><a href="/Typescript-manual/download/zh/breaking-changes/typescript-2.8.html" class="sidebar-link">TypeScript 2.8</a></li><li><a href="/Typescript-manual/download/zh/breaking-changes/typescript-2.7.html" class="sidebar-link">TypeScript 2.7</a></li><li><a href="/Typescript-manual/download/zh/breaking-changes/typescript-2.6.html" class="sidebar-link">TypeScript 2.6</a></li><li><a href="/Typescript-manual/download/zh/breaking-changes/typescript-2.4.html" class="sidebar-link">TypeScript 2.4</a></li><li><a href="/Typescript-manual/download/zh/breaking-changes/typescript-2.3.html" class="sidebar-link">TypeScript 2.3</a></li><li><a href="/Typescript-manual/download/zh/breaking-changes/typescript-2.2.html" class="sidebar-link">TypeScript 2.2</a></li><li><a href="/Typescript-manual/download/zh/breaking-changes/typescript-2.1.html" class="sidebar-link">TypeScript 2.1</a></li><li><a href="/Typescript-manual/download/zh/breaking-changes/typescript-2.0.html" class="sidebar-link">TypeScript 2.0</a></li><li><a href="/Typescript-manual/download/zh/breaking-changes/typescript-1.8.html" class="sidebar-link">TypeScript 1.8</a></li><li><a href="/Typescript-manual/download/zh/breaking-changes/typescript-1.7.html" class="sidebar-link">TypeScript 1.7</a></li><li><a href="/Typescript-manual/download/zh/breaking-changes/typescript-1.6.html" class="sidebar-link">TypeScript 1.6</a></li><li><a href="/Typescript-manual/download/zh/breaking-changes/typescript-1.5.html" class="sidebar-link">TypeScript 1.5</a></li><li><a href="/Typescript-manual/download/zh/breaking-changes/typescript-1.4.html" class="sidebar-link">TypeScript 1.4</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="typescript-5-4"><a href="#typescript-5-4" class="header-anchor">#</a> TypeScript 5.4</h1> <h2 id="从最后一次赋值以后-在闭包中保留类型细化"><a href="#从最后一次赋值以后-在闭包中保留类型细化" class="header-anchor">#</a> 从最后一次赋值以后，在闭包中保留类型细化</h2> <p>TypeScript 通常可以根据您进行的检查来确定变量更具体的类型。
这个过程被称为类型细化。</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token function">uppercaseStrings</span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> x <span class="token operator">===</span> <span class="token string">'string'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// TypeScript 知道 'x' 是 'string' 类型</span>
    <span class="token keyword">return</span> x<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>一个常见的痛点是被细化的类型不总会在闭包函数中保留。</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token function">getUrls</span><span class="token punctuation">(</span>url<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token constant">URL</span><span class="token punctuation">,</span> names<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> url <span class="token operator">===</span> <span class="token string">'string'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    url <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name"><span class="token constant">URL</span></span><span class="token punctuation">(</span>url<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> names<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span>name <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    url<span class="token punctuation">.</span>searchParams<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'name'</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//  ~~~~~~~~~~~~</span>
    <span class="token comment">// error!</span>
    <span class="token comment">// Property 'searchParams' does not exist on type 'string | URL'.</span>

    <span class="token keyword">return</span> url<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>在这里，TypeScript 决定在我们的回调函数中不 “安全” 地假设  <code>url</code> <em>实际上</em>是一个  <code>URL</code>  对象，因为它在其他地方发生了变化；
然而，在这种情况下，箭头函数总是在对  <code>url</code>  的赋值之后创建的，并且它也是对  <code>url</code>  的最后一次赋值。</p> <p>TypeScript 5.4 利用这一点使类型细化变得更加智能。
当在非<a href="https://developer.mozilla.org/en-US/docs/Glossary/Hoisting" target="_blank" rel="noopener noreferrer">提升<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>的函数中使用参数和  <code>let</code>  变量时，类型检查器将寻找最后一次赋值点。
如果找到了这样的点，TypeScript 可以安全地从包含函数的外部进行类型细化。
这意味着上面的例子现在可以正常工作了。</p> <p>请注意，如果变量在嵌套函数的任何地方被赋值，类型细化分析将不会生效。
这是因为无法确定该函数是否会在后续被调用。</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token function">printValueLater</span><span class="token punctuation">(</span>value<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token operator">|</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>value <span class="token operator">===</span> <span class="token keyword">undefined</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    value <span class="token operator">=</span> <span class="token string">'missing!'</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">// Modifying 'value', even in a way that shouldn't affect</span>
    <span class="token comment">// its type, will invalidate type refinements in closures.</span>
    value <span class="token operator">=</span> value<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">//          ~~~~~</span>
    <span class="token comment">// error! 'value' is possibly 'undefined'.</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这将使许多典型的 JavaScript 代码更容易表达出来。
更多详情请参考<a href="https://github.com/microsoft/TypeScript/pull/56908" target="_blank" rel="noopener noreferrer"> PR<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <h2 id="noinfer-工具类型"><a href="#noinfer-工具类型" class="header-anchor">#</a> <code>NoInfer</code>  工具类型</h2> <p>当调用泛型函数时，TypeScript 能够从实际参数推断出类型参数的值。</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token generic-function"><span class="token function">doSomething</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>arg<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>

<span class="token comment">// We can explicitly say that 'T' should be 'string'.</span>
<span class="token generic-function"><span class="token function">doSomething</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token builtin">string</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token string">'hello!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// We can also just let the type of 'T' get inferred.</span>
<span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token string">'hello!'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>然而，一个挑战是并不总能够清楚推断出 “最佳” 的类型是什么。
这可能导致 TypeScript 拒绝合理的调用，接受有问题的调用，或者在捕捉到 bug 时报告较差的错误消息。</p> <p>例如，假设  <code>createStreetLight</code>  函数接收一系列颜色名，以及一个默认颜色名。</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token generic-function"><span class="token function">createStreetLight</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">C</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>colors<span class="token operator">:</span> <span class="token constant">C</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> defaultColor<span class="token operator">?</span><span class="token operator">:</span> <span class="token constant">C</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>

<span class="token function">createStreetLight</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'red'</span><span class="token punctuation">,</span> <span class="token string">'yellow'</span><span class="token punctuation">,</span> <span class="token string">'green'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'red'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>当我们传入的  <code>defaultColor</code>  不在  <code>colors</code>  数组里会发生什么？
在这个函数中， <code>colors</code>  被当成 “事实来源”，并描述了可以传递给  <code>defaultColor</code> 。</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// Oops! This undesirable, but is allowed!</span>
<span class="token function">createStreetLight</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'red'</span><span class="token punctuation">,</span> <span class="token string">'yellow'</span><span class="token punctuation">,</span> <span class="token string">'green'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'blue'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>在这个调用中，类型推断决定  <code>&quot;blue&quot;</code>  与  <code>&quot;red&quot;</code> 、 <code>&quot;yellow&quot;</code>  或  <code>&quot;green&quot;</code>  一样有效。
因此，TypeScript 推断  <code>C</code>  的类型为  <code>&quot;red&quot; | &quot;yellow&quot; | &quot;green&quot; | &quot;blue&quot;</code> 。
可以说推断结果让我们感到十分惊讶！</p> <p>目前人们处理这个问题的一种方式是添加一个独立的类型参数，该参数受现有类型参数的限制。</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token generic-function"><span class="token function">createStreetLight</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">C</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token constant">D</span> <span class="token keyword">extends</span> <span class="token constant">C</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>
  colors<span class="token operator">:</span> <span class="token constant">C</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  defaultColor<span class="token operator">?</span><span class="token operator">:</span> <span class="token constant">D</span>
<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token function">createStreetLight</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'red'</span><span class="token punctuation">,</span> <span class="token string">'yellow'</span><span class="token punctuation">,</span> <span class="token string">'green'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'blue'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//                                            ~~~~~~</span>
<span class="token comment">// error!</span>
<span class="token comment">// Argument of type '&quot;blue&quot;' is not assignable to parameter of type '&quot;red&quot; | &quot;yellow&quot; | &quot;green&quot; | undefined'.</span>
</code></pre></div><p>这种方法可以解决问题，但有点尴尬，因为在  <code>createStreetLight</code>  的签名中可能不会在其他地方使用  <code>D</code> 。
虽然这种情况不算糟糕，但在签名中只使用一次类型参数通常是一种代码坏味道。</p> <p>这就是为什么 TypeScript 5.4 引入了一个新的  <code>NoInfer&lt;T&gt;</code>  实用类型。
将一个类型包裹在  <code>NoInfer&lt;...&gt;</code>  中向 TypeScript 发出一个信号，告诉它不要深入匹配内部类型以寻找类型推断的候选项。</p> <p>使用  <code>NoInfer</code> ，我们可以将  <code>createStreetLight</code>  重写为以下形式：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token generic-function"><span class="token function">createStreetLight</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">C</span> <span class="token keyword">extends</span> <span class="token builtin">string</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>
  colors<span class="token operator">:</span> <span class="token constant">C</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  defaultColor<span class="token operator">?</span><span class="token operator">:</span> NoInfer<span class="token operator">&lt;</span><span class="token constant">C</span><span class="token operator">&gt;</span>
<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// ...</span>
<span class="token punctuation">}</span>

<span class="token function">createStreetLight</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">'red'</span><span class="token punctuation">,</span> <span class="token string">'yellow'</span><span class="token punctuation">,</span> <span class="token string">'green'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token string">'blue'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">//                                            ~~~~~~</span>
<span class="token comment">// error!</span>
<span class="token comment">// Argument of type '&quot;blue&quot;' is not assignable to parameter of type '&quot;red&quot; | &quot;yellow&quot; | &quot;green&quot; | undefined'.</span>
</code></pre></div><p>排除对  <code>defaultColor</code>  类型进行推断的探索意味着  <code>&quot;blue&quot;</code>  永远不会成为推断的候选项，类型检查器可以拒绝它。</p> <p>具体实现请参考 <a href="https://github.com/microsoft/TypeScript/pull/56794" target="_blank" rel="noopener noreferrer">PR<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，以及最初实现 <a href="https://github.com/microsoft/TypeScript/pull/52968" target="_blank" rel="noopener noreferrer">PR<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，感谢<a href="https://github.com/Andarist" target="_blank" rel="noopener noreferrer"> Mateusz Burzyński<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p> <h2 id="object-groupby-和-map-groupby"><a href="#object-groupby-和-map-groupby" class="header-anchor">#</a> <code>Object.groupBy</code>  和  <code>Map.groupBy</code></h2> <p>TypeScript 5.4 为 JavaScript 的新静态方法  <code>Object.groupBy</code>  和  <code>Map.groupBy</code>  添加了声明。</p> <p><code>Object.groupBy</code>  接受一个可迭代对象和一个函数，该函数确定每个元素应该被放置在哪个 “组” 中。
该函数需要为每个不同的分组生成一个 “键”，而  <code>Object.groupBy</code>  使用该键来创建一个对象，其中每个键都映射到一个包含原始元素的数组。</p> <p>因此：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> array <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> myObj <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">groupBy</span><span class="token punctuation">(</span>array<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">num<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> num <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token string">'even'</span> <span class="token operator">:</span> <span class="token string">'odd'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>等同于：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> myObj <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token literal-property property">even</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token literal-property property">odd</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><p><code>Map.groupBy</code>  类似，但生成的是一个  <code>Map</code>  而不是普通对象。
如果您需要  <code>Map</code>  提供的保证、处理期望  <code>Map</code>  的 API，或者需要使用任何类型的键进行分组（而不仅仅是可以作为 JavaScript 属性名的键），那么这可能更可取。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> myObj <span class="token operator">=</span> Map<span class="token punctuation">.</span><span class="token function">groupBy</span><span class="token punctuation">(</span>array<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">num<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> num <span class="token operator">%</span> <span class="token number">2</span> <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token string">'even'</span> <span class="token operator">:</span> <span class="token string">'odd'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>就像之前一样，你可以用等效的方式创建  <code>myObj</code> ：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> myObj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

myObj<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'even'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
myObj<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'odd'</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>注意在  <code>Object.groupBy</code>  的例子中，生成的对象使用了所有可选属性。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">interface</span> <span class="token class-name">EvenOdds</span> <span class="token punctuation">{</span>
    even<span class="token operator">?</span><span class="token operator">:</span> number<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    odd<span class="token operator">?</span><span class="token operator">:</span> number<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">const</span> <span class="token literal-property property">myObj</span><span class="token operator">:</span> EvenOdds <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">groupBy</span><span class="token punctuation">(</span><span class="token operator">...</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

myObj<span class="token punctuation">.</span>even<span class="token punctuation">;</span>
<span class="token comment">//    ~~~~</span>
<span class="token comment">// Error to access this under 'strictNullChecks'.</span>
</code></pre></div><p>这是因为没法保证  <code>groupBy</code>  生成了<em>所有的</em>键。</p> <p>注意这些方法仅在将  <code>target</code>  设置为  <code>esnext</code> ，或者设置了相应的  <code>lib</code>  选项时才可用。
我们预计它们最终会在稳定的  <code>es2024</code>  目标下可用。</p> <p>感谢<a href="https://github.com/bakkot" target="_blank" rel="noopener noreferrer"> Kevin Gibbons<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 的<a href="https://github.com/microsoft/TypeScript/pull/56805" target="_blank" rel="noopener noreferrer"> PR<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <h2 id="支持在-moduleresolution-bundler-和-module-preserve-时-使用-require"><a href="#支持在-moduleresolution-bundler-和-module-preserve-时-使用-require" class="header-anchor">#</a> 支持在  <code>--moduleResolution bundler</code>  和  <code>--module preserve</code>  时 使用  <code>require()</code></h2> <p>TypeScript 有一个名为  <code>bundler</code>  的  <code>moduleResolution</code>  选项，旨在模拟现代打包工具确定导入路径所指向的文件的方式。
该选项的一个限制是它必须与  <code>--module esnext</code>  配对使用，这导致无法使用  <code>import ... = require(...)</code>  语法。</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// previously errored</span>
<span class="token keyword">import</span> myModule <span class="token operator">=</span> <span class="token keyword">require</span><span class="token punctuation">(</span><span class="token string">'module/path'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>如果您计划只编写标准的 ECMAScript  <code>import</code> ，这可能看起来并不是很重要，但在使用具有<a href="https://nodejs.org/api/packages.html#conditional-exports" target="_blank" rel="noopener noreferrer">条件导出<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>的包时就会有所不同。</p> <p>在 TypeScript 5.4 中，当将  <code>module</code>  设置为一个名为  <code>preserve</code>  的新选项时，可以使用  <code>require()</code> 。</p> <p>在  <code>--module preserve</code>  和  <code>--moduleResolution bundler</code>  之间，这两个选项更准确地模拟了像 Bun 等打包工具和运行时环境允许的操作以及它们如何执行模块查找。
实际上，在使用  <code>--module preserve</code>  时， <code>--moduleResolution</code>  选项将会隐式设置为  <code>bundler</code> （以及  <code>--esModuleInterop</code>  和  <code>--resolveJsonModule</code> ）。</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;compilerOptions&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;module&quot;</span><span class="token operator">:</span> <span class="token string">&quot;preserve&quot;</span>
    <span class="token comment">// ^ also implies:</span>
    <span class="token comment">// &quot;moduleResolution&quot;: &quot;bundler&quot;,</span>
    <span class="token comment">// &quot;esModuleInterop&quot;: true,</span>
    <span class="token comment">// &quot;resolveJsonModule&quot;: true,</span>

    <span class="token comment">// ...</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>在  <code>--module preserve</code>  下，ECMAScript 的  <code>import</code>  语句将始终按原样输出，而  <code>import ... = require(...)</code>  语句将被输出为  <code>require()</code>  调用（尽管实际上你可能不会使用 TypeScript 进行输出，因为你很可能会使用打包工具来处理你的代码）。
这一点不受包含文件的文件扩展名的影响。
因此，以下代码：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> foo <span class="token keyword">from</span> <span class="token string">'some-package/foo'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> bar <span class="token operator">=</span> <span class="token keyword">require</span><span class="token punctuation">(</span><span class="token string">'some-package/bar'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>的输出结果会是这样：</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> foo <span class="token keyword">from</span> <span class="token string">'some-package/foo'</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> bar <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'some-package/bar'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>这也意味着您选择的语法将指定条件导出的匹配方式。
因此，在上面的示例中，如果  <code>some-package</code>  的  <code>package.json</code>  如下所示：</p> <div class="language-json extra-class"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;some-package&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;0.0.1&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;exports&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;./foo&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;import&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./esm/foo-from-import.mjs&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;require&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./cjs/foo-from-require.cjs&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;./bar&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;import&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./esm/bar-from-import.mjs&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;require&quot;</span><span class="token operator">:</span> <span class="token string">&quot;./cjs/bar-from-require.cjs&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>TypeScript 会将路径解析为  <code>[...]/some-package/esm/foo-from-import.mjs</code>  和  <code>[...]/some-package/cjs/bar-from-require.cjs</code> 。</p> <p>更多详情请参考 <a href="https://github.com/microsoft/TypeScript/pull/56785" target="_blank" rel="noopener noreferrer">PR<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <h2 id="检查导入属性和断言"><a href="#检查导入属性和断言" class="header-anchor">#</a> 检查导入属性和断言</h2> <p>导入属性和断言现在会与全局的  <code>ImportAttributes</code>  类型进行检查。
这意味着运行时现在可以更准确地描述导入属性。</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// In some global file.</span>
<span class="token keyword">interface</span> <span class="token class-name">ImportAttributes</span> <span class="token punctuation">{</span>
    type<span class="token operator">:</span> <span class="token string">&quot;json&quot;</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// In some other module</span>
<span class="token keyword">import</span> <span class="token operator">*</span> <span class="token keyword">as</span> ns <span class="token keyword">from</span> <span class="token string">&quot;foo&quot;</span> <span class="token keyword">with</span> <span class="token punctuation">{</span> type<span class="token operator">:</span> <span class="token string">&quot;not-json&quot;</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">//                                     ~~~~~~~~~~</span>
<span class="token comment">// error!</span>
<span class="token comment">//</span>
<span class="token comment">// Type '{ type: &quot;not-json&quot;; }' is not assignable to type 'ImportAttributes'.</span>
<span class="token comment">//  Types of property 'type' are incompatible.</span>
<span class="token comment">//    Type '&quot;not-json&quot;' is not assignable to type '&quot;json&quot;'.</span>
</code></pre></div><p>感谢 <a href="https://github.com/a-tarasyuk" target="_blank" rel="noopener noreferrer">Oleksandr Tarasiuk<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 的 <a href="https://github.com/microsoft/TypeScript/pull/56034" target="_blank" rel="noopener noreferrer">PR<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <h2 id="快速修复-添加缺失参数"><a href="#快速修复-添加缺失参数" class="header-anchor">#</a> 快速修复：添加缺失参数</h2> <p>TypeScript 现在提供了一个快速修复选项，可以为被调用时传递了过多参数的函数添加一个新的参数。</p> <p><img src="https://devblogs.microsoft.com/typescript/wp-content/uploads/sites/11/2024/01/add-missing-params-5-4-beta-before.png" alt="x"></p> <p><img src="https://devblogs.microsoft.com/typescript/wp-content/uploads/sites/11/2024/01/add-missing-params-5-4-beta-after.png" alt="x"></p> <p>当在多个现有函数之间传递一个新参数时，这将非常有用，而目前这样做可能会很麻烦。</p> <p>感谢 <a href="https://github.com/a-tarasyuk" target="_blank" rel="noopener noreferrer">Oleksandr Tarasiuk<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 的 <a href="https://github.com/microsoft/TypeScript/pull/56411" target="_blank" rel="noopener noreferrer">PR<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <h2 id="子路径导入支持自动导入"><a href="#子路径导入支持自动导入" class="header-anchor">#</a> 子路径导入支持自动导入</h2> <p>在 Node.js 中， <code>package.json</code>  通过一个名为  <code>imports</code>  的字段支持一种称为 “子路径导入” 的功能。
这是一种将包内的路径重新映射到其他模块路径的方式。
在概念上，这与路径映射非常相似，某些模块打包工具和加载器支持该功能（TypeScript 通过一个称为  <code>paths</code>  的功能也支持该功能）。
唯一的区别是，子路径导入必须始终以  <code>#</code>  开头。</p> <p>TypeScript 的自动导入功能以前不会考虑  <code>imports</code>  中的路径，这可能令人沮丧。
相反，用户可能需要在  <code>tsconfig.json</code>  中手动定义路径。
然而，由于 <a href="https://github.com/emmatown" target="_blank" rel="noopener noreferrer">Emma Hamilton<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> 的贡献，TypeScript 的自动导入现在支持<a href="https://github.com/microsoft/TypeScript/pull/55015" target="_blank" rel="noopener noreferrer">子路径导入<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>！</p> <h2 id="即将到来的-typescript-5-0-弃用功能"><a href="#即将到来的-typescript-5-0-弃用功能" class="header-anchor">#</a> 即将到来的 TypeScript 5.0 弃用功能</h2> <p>TypeScript 5.0 弃用了以下选项和行为：</p> <ul><li>charset</li> <li>target: ES3</li> <li>importsNotUsedAsValues</li> <li>noImplicitUseStrict</li> <li>noStrictGenericChecks</li> <li>keyofStringsOnly</li> <li>suppressExcessPropertyErrors</li> <li>suppressImplicitAnyIndexErrors</li> <li>out</li> <li>preserveValueImports</li> <li>工程引用中的 prepend</li> <li>隐式的系统特定 newLine</li></ul> <p>为了继续使用这些功能，使用 TypeScript 5.0 + 版本的开发人员必须指定一个名为  <code>ignoreDeprecations</code>  的新选项，其值为  <code>&quot;5.0&quot;</code> 。</p> <p>然而，TypScript 5.4 将是这些功能继续正常工作的最后一个版本。
到了 TypeScript 5.5（可能是 2024 年 6 月），它们将变成严格的错误，使用它们的代码将需要进行迁移。</p> <p>要获取更多信息，您可以在 GitHub 上查阅<a href="https://github.com/microsoft/TypeScript/issues/51909" target="_blank" rel="noopener noreferrer">这个计划<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，其中包含了如何最佳地适应您的代码库的建议。</p> <h2 id="值得注意的行为改变"><a href="#值得注意的行为改变" class="header-anchor">#</a> 值得注意的行为改变</h2> <p>本节重点介绍一系列值得注意的变更，作为升级的一部分，应该予以认识和理解。
有时它会强调弃用、移除和新的限制。
它还可能包含功能性改进的错误修复，但这些修复也可能通过引入新的错误影响现有的构建。</p> <h3 id="lib-d-ts-变化"><a href="#lib-d-ts-变化" class="header-anchor">#</a> lib.d.ts 变化</h3> <p><a href="https://github.com/microsoft/TypeScript/pull/57027" target="_blank" rel="noopener noreferrer">DOM 类型有变化<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <h3 id="更准确的有条件类型约束"><a href="#更准确的有条件类型约束" class="header-anchor">#</a> 更准确的有条件类型约束</h3> <p>下面的  <code>foo</code>  函数不再允许第二个变量声明。</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">type</span> <span class="token class-name">IsArray<span class="token operator">&lt;</span><span class="token constant">T</span><span class="token operator">&gt;</span></span> <span class="token operator">=</span> <span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token class-name"><span class="token builtin">any</span></span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">?</span> <span class="token boolean">true</span> <span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token generic-function"><span class="token function">foo</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">U</span> <span class="token keyword">extends</span> object<span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>x<span class="token operator">:</span> IsArray<span class="token operator">&lt;</span><span class="token constant">U</span><span class="token operator">&gt;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> first<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token operator">=</span> x<span class="token punctuation">;</span> <span class="token comment">// Error</span>
  <span class="token keyword">let</span> second<span class="token operator">:</span> <span class="token boolean">false</span> <span class="token operator">=</span> x<span class="token punctuation">;</span> <span class="token comment">// Error, but previously wasn't</span>
<span class="token punctuation">}</span>
</code></pre></div><p>在之前的版本中，当 TypeScript 检查第二个初始化器时，它需要确定  <code>IsArray&lt;U&gt;</code>  是否可赋值给  <code>false</code>  类型的单元类型。
虽然  <code>IsArray&lt;U&gt;</code>  在任何明显的方式下都不兼容，但 TypeScript 也会考虑该类型的约束。
在形如  <code>T extends Foo ? TrueBranch : FalseBranch</code>  的条件类型中，其中  <code>T</code>  是泛型，类型系统会查看  <code>T</code>  的约束，在  <code>T</code>  本身的位置上进行替代，并决定选择  <code>true</code>  分支还是  <code>false</code>  分支。</p> <p>但是，这种行为是不准确的，因为它过于急切。即使  <code>T</code>  的约束不能赋值给  <code>Foo</code> ，也并不意味着它不会实例化为某个可赋值给  <code>Foo</code>  的类型。
因此，更正确的行为是在无法证明  <code>T</code>  永远不会或总是 extends  <code>Foo</code>  的情况下，为条件类型的约束产生一个联合类型。</p> <p>TypeScript 5.4 采用了这种更准确的行为。
在实践中，这意味着您可能会发现某些条件类型实例与它们的分支不再兼容。</p> <p>您可以在<a href="https://github.com/microsoft/TypeScript/pull/56004" target="_blank" rel="noopener noreferrer">此处<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>阅读具体的更改内容。</p> <h3 id="更积极地减少类型变量与原始类型之间的交集"><a href="#更积极地减少类型变量与原始类型之间的交集" class="header-anchor">#</a> 更积极地减少类型变量与原始类型之间的交集</h3> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">declare</span> <span class="token keyword">function</span> <span class="token generic-function"><span class="token function">intersect</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span><span class="token punctuation">,</span> <span class="token constant">U</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">,</span> y<span class="token operator">:</span> <span class="token constant">U</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token constant">T</span> <span class="token operator">&amp;</span> <span class="token constant">U</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token generic-function"><span class="token function">foo</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token string">'abc'</span> <span class="token operator">|</span> <span class="token string">'def'</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span>x<span class="token operator">:</span> <span class="token constant">T</span><span class="token punctuation">,</span> str<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> num<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Was 'T &amp; string', now is just 'T'</span>
  <span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token function">intersect</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> str<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// Was 'T &amp; number', now is just 'never'</span>
  <span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token function">intersect</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> num<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// Was '(T &amp; &quot;abc&quot;) | (T &amp; &quot;def&quot;)', now is just 'T'</span>
  <span class="token keyword">let</span> c <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">&lt;</span> <span class="token number">0.5</span> <span class="token operator">?</span> <span class="token function">intersect</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token string">'abc'</span><span class="token punctuation">)</span> <span class="token operator">:</span> <span class="token function">intersect</span><span class="token punctuation">(</span>x<span class="token punctuation">,</span> <span class="token string">'def'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>更多详情请参考 <a href="https://github.com/microsoft/TypeScript/pull/56515" target="_blank" rel="noopener noreferrer">PR<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <h3 id="改进了对带有插值的模板字符串的检查"><a href="#改进了对带有插值的模板字符串的检查" class="header-anchor">#</a> 改进了对带有插值的模板字符串的检查</h3> <p>TypeScript 现在更准确地检查字符串是否可赋值给模板字符串类型的占位符位置。</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">function</span> <span class="token generic-function"><span class="token function">a</span><span class="token generic class-name"><span class="token operator">&lt;</span><span class="token constant">T</span> <span class="token keyword">extends</span> <span class="token punctuation">{</span> id<span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">}</span><span class="token operator">&gt;</span></span></span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> x<span class="token operator">:</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">-</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span><span class="token keyword">keyof</span> <span class="token constant">T</span> <span class="token operator">&amp;</span> <span class="token builtin">string</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>

  <span class="token comment">// Used to error, now doesn't.</span>
  x <span class="token operator">=</span> <span class="token string">'-id'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这种行为更加理想，但可能会导致使用条件类型等结构的代码出现问题，因为这些规则变化很容易引发观察到的错误。</p> <p>更多详情请参考 <a href="https://github.com/microsoft/TypeScript/pull/56598" target="_blank" rel="noopener noreferrer">PR<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <h3 id="当类型导入与本地值冲突时报错"><a href="#当类型导入与本地值冲突时报错" class="header-anchor">#</a> 当类型导入与本地值冲突时报错</h3> <p>在之前的版本中，如果对  <code>&quot;Something&quot;</code>  的导入只涉及类型，TypeScript 会在  <code>&quot;isolatedModules&quot;</code>  下允许以下代码。</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Something <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./some/path'</span><span class="token punctuation">;</span>

<span class="token keyword">let</span> Something <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">;</span>
</code></pre></div><p>然而，对于单文件编译器来说，假设是否能够 &quot;安全&quot; 删除  <code>import</code>  并不可靠，即使代码在运行时肯定会失败。
在 TypeScript 5.4 中，这段代码将触发以下类似的错误：</p> <div class="language-ts extra-class"><pre class="language-ts"><code>Import <span class="token string">'Something'</span> conflicts <span class="token keyword">with</span> local value<span class="token punctuation">,</span> so must be declared <span class="token keyword">with</span> a type<span class="token operator">-</span>only <span class="token keyword">import</span> when <span class="token string">'isolatedModules'</span> <span class="token keyword">is</span> enabled<span class="token punctuation">.</span>
</code></pre></div><p>修改方法或者给本地变量重命名，或者为导入语句添加  <code>type</code>  修饰符：</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">{</span> Something <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./some/path'</span><span class="token punctuation">;</span>

<span class="token comment">// or</span>

<span class="token keyword">import</span> <span class="token punctuation">{</span> <span class="token keyword">type</span> <span class="token class-name">Something</span> <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./some/path'</span><span class="token punctuation">;</span>
</code></pre></div><p>更多详情请参考 <a href="https://github.com/microsoft/TypeScript/pull/56354" target="_blank" rel="noopener noreferrer">PR<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <h3 id="新的枚举可赋值性检查"><a href="#新的枚举可赋值性检查" class="header-anchor">#</a> 新的枚举可赋值性检查</h3> <p>在之前的版本中，当两个枚举具有相同的声明名称和枚举成员名称时，它们通常被认为是兼容的。
然而，当这些值是已知的时候，TypeScript 会默默地允许它们具有不同的值。</p> <p>TypeScript 5.4 通过要求已知的值必须相同来加强这一限制。
这意味着当枚举的值已知时，它们必须具有相同的值。</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">namespace</span> First <span class="token punctuation">{</span>
  <span class="token keyword">export</span> <span class="token keyword">enum</span> SomeEnum <span class="token punctuation">{</span>
    <span class="token constant">A</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token constant">B</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">namespace</span> Second <span class="token punctuation">{</span>
  <span class="token keyword">export</span> <span class="token keyword">enum</span> SomeEnum <span class="token punctuation">{</span>
    <span class="token constant">A</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
    <span class="token constant">B</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span>x<span class="token operator">:</span> First<span class="token punctuation">.</span>SomeEnum<span class="token punctuation">,</span> y<span class="token operator">:</span> Second<span class="token punctuation">.</span>SomeEnum<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Both used to be compatible - no longer the case,</span>
  <span class="token comment">// TypeScript errors with something like:</span>
  <span class="token comment">//</span>
  <span class="token comment">//  Each declaration of 'SomeEnum.B' differs in its value, where '1' was expected but '2' was given.</span>
  x <span class="token operator">=</span> y<span class="token punctuation">;</span>
  y <span class="token operator">=</span> x<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>此外，对于一个枚举成员没有静态已知值的情况，还有一些新的限制。
在这些情况下，另一个枚举成员必须至少是隐式数字类型（例如，它没有静态解析的初始化值），或者是显式数字类型（意味着 TypeScript 可以将值解析为某个数字类型）。
从实际角度来看，这意味着字符串枚举成员只能与具有相同值的其他字符串枚举兼容。</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">namespace</span> First <span class="token punctuation">{</span>
  <span class="token keyword">export</span> <span class="token keyword">declare</span> <span class="token keyword">enum</span> SomeEnum <span class="token punctuation">{</span>
    <span class="token constant">A</span><span class="token punctuation">,</span>
    <span class="token constant">B</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">namespace</span> Second <span class="token punctuation">{</span>
  <span class="token keyword">export</span> <span class="token keyword">declare</span> <span class="token keyword">enum</span> SomeEnum <span class="token punctuation">{</span>
    <span class="token constant">A</span><span class="token punctuation">,</span>
    <span class="token constant">B</span> <span class="token operator">=</span> <span class="token string">'some known string'</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span>x<span class="token operator">:</span> First<span class="token punctuation">.</span>SomeEnum<span class="token punctuation">,</span> y<span class="token operator">:</span> Second<span class="token punctuation">.</span>SomeEnum<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// Both used to be compatible - no longer the case,</span>
  <span class="token comment">// TypeScript errors with something like:</span>
  <span class="token comment">//</span>
  <span class="token comment">//  One value of 'SomeEnum.B' is the string '&quot;some known string&quot;', and the other is assumed to be an unknown numeric value.</span>
  x <span class="token operator">=</span> y<span class="token punctuation">;</span>
  y <span class="token operator">=</span> x<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><p>更多详情请参考 <a href="https://github.com/microsoft/TypeScript/pull/55924" target="_blank" rel="noopener noreferrer">PR<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <h3 id="枚举成员名的限制"><a href="#枚举成员名的限制" class="header-anchor">#</a> 枚举成员名的限制</h3> <p>TypeScript 不再允许枚举成员名使用  <code>Infinity</code> ， <code>-Infinity</code> ，或  <code>NaN</code> 。</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token comment">// Errors on all of these:</span>
<span class="token comment">//</span>
<span class="token comment">//  An enum member cannot have a numeric name.</span>
<span class="token keyword">enum</span> <span class="token constant">E</span> <span class="token punctuation">{</span>
  <span class="token number">Infinity</span> <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>
  <span class="token string">'-Infinity'</span> <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>
  <span class="token number">NaN</span> <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><p>更多详情请参考 <a href="https://github.com/microsoft/TypeScript/pull/56161" target="_blank" rel="noopener noreferrer">PR<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <h3 id="在具有-any-剩余元素的元组上-更好地保留映射类型"><a href="#在具有-any-剩余元素的元组上-更好地保留映射类型" class="header-anchor">#</a> 在具有  <code>any</code>  剩余元素的元组上，更好地保留映射类型</h3> <p>在之前的版本中，将带有  <code>&quot;any&quot;</code>  类型的映射类型应用于元组时，会创建一个  <code>&quot;any&quot;</code>  元素类型。
这是不可取的，并且现在已经修复了这个问题。</p> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token builtin">Promise</span><span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">''</span><span class="token punctuation">,</span> <span class="token operator">...</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token keyword">as</span> <span class="token builtin">any</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>result <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> head <span class="token operator">=</span> result<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span> <span class="token comment">// 5.3: any, 5.4: string</span>
  <span class="token keyword">const</span> tail <span class="token operator">=</span> result<span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 5.3 any, 5.4: any[]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>更多详情请参考 <a href="https://github.com/microsoft/TypeScript/pull/57031" target="_blank" rel="noopener noreferrer">PR<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，<a href="https://github.com/microsoft/TypeScript/issues/57389" target="_blank" rel="noopener noreferrer">Issue<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>，<a href="https://github.com/microsoft/TypeScript/issues/57389" target="_blank" rel="noopener noreferrer">Issue<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <h3 id="代码生成变化"><a href="#代码生成变化" class="header-anchor">#</a> 代码生成变化</h3> <p>虽然这不是一个直接的破坏性变更，但开发人员可能会隐式地依赖于 TypeScript 生成的 JavaScript 或声明文件输出。以下是一些值得注意的变化。</p> <ul><li><a href="https://github.com/microsoft/TypeScript/pull/55820" target="_blank" rel="noopener noreferrer">当类型参数被遮蔽时更频繁地保留类型参数名称<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/microsoft/TypeScript/pull/56296" target="_blank" rel="noopener noreferrer">将异步函数的复杂参数列表移到降级生成器主体中<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/microsoft/TypeScript/pull/57020" target="_blank" rel="noopener noreferrer">不要移除函数声明中的绑定别名<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://github.com/microsoft/TypeScript/pull/56395" target="_blank" rel="noopener noreferrer">当存在 ImportTypeNode 时，ImportAttributes 应该经过相同的编译阶段处理<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/Typescript-manual/download/zh/release-notes/typescript-5.5.html" class="prev">
        TypeScript 5.5
      </a></span> <span class="next"><a href="/Typescript-manual/download/zh/release-notes/typescript-5.3.html">
        TypeScript 5.3
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><!----></div></div>
    <script src="/Typescript-manual/assets/js/app.1593970b.js" defer></script><script src="/Typescript-manual/assets/js/2.f0d70486.js" defer></script><script src="/Typescript-manual/assets/js/1.93812fe5.js" defer></script><script src="/Typescript-manual/assets/js/164.210d1a22.js" defer></script>
  </body>
</html>
